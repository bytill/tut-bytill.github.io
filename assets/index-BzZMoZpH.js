import{a as L,r as g,j as e,b as H,c as K,R as $,u as Q,d as W,e as O,f as X,H as ee}from"./react-vendor-BAuTNlZx.js";import{u as C,g as k,s as F,L as te}from"./i18n-utility-BuXHGbFz.js";import{u as I,s as U,S as se,G as ne,g as oe}from"./games-iJAUANZl.js";import"./vendor-D5KewTc8.js";import"./i18n-de-never-DEVRdBKE.js";import"./i18n-de-settings_data-DdyBTEFQ.js";import"./i18n-de-truefalse-Kz11CAeB.js";import"./i18n-de-sagWas-DF1h4mkh.js";import"./i18n-de-schaetzMal-Ca8elwcg.js";import"./i18n-de-kingscup-ZimsE_sz.js";import"./i18n-en-never-CSSF9yzg.js";import"./i18n-en-settings_data-B5ayvGXx.js";import"./i18n-en-truefalse-D5Kl3_os.js";import"./i18n-en-sagWas-DNxgOlrY.js";import"./i18n-en-schaetzMal-DUogxvyt.js";import"./i18n-en-kingscup-DidRIP7N.js";import"./framer-motion-DIIAZVqd.js";import"./qrcode-react-DGOd0oFt.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();function ae(){const t=L();g.useEffect(()=>{var n,i;typeof window<"u"&&typeof window.gtag=="function"&&((i=(n=window.Cookiebot)==null?void 0:n.consent)==null?void 0:i.statistics)===!0&&window.gtag("event","page_view",{page_path:t.pathname+t.search+t.hash})},[t])}function E(t,n={}){var i,s;typeof window<"u"&&typeof window.gtag=="function"&&((s=(i=window.Cookiebot)==null?void 0:i.consent)==null?void 0:s.statistics)===!0&&window.gtag("event",t,n)}function T(t,n){E("game_start",{game:t,orgin:n})}function ie(t,n){E("game_end",{game:t,duration:n})}function y(t){E("button_click",{buttonName:t})}function re(t="",n=50){const[i,s]=g.useState(0);return g.useEffect(()=>{if(s(0),!t)return;const o=setInterval(()=>{s(a=>{const r=a+1;return r>t.length&&clearInterval(o),r})},n);return()=>clearInterval(o)},[t,n]),t.slice(0,i)}function ce({text:t}){const n=re(t,50);return e.jsx("div",{className:"speech-bubble fade-in",children:e.jsx("div",{className:"speech-bubble-text",children:n})})}function Y({page:t,steps:n,visible:i,currentStep:s}){const{currentTranslation:o}=C(),[a,r]=g.useState(0),h=I();if(g.useEffect(()=>{i&&s(a)},[a,i]),!i)return null;const v=()=>{h("button_click"),y(`onboarding_${t}skiped`),localStorage.setItem(`onboarding-${t}-completed`,"true"),s(0)},x=()=>{a>0&&(h("button_click"),r(m=>m-1))},j=()=>{a<n.length-1?(h("button_click"),r(m=>m+1)):(h("button_click"),y(`onboarding_${t}_completed`),localStorage.setItem(`onboarding-${t}-completed`,"true"),s(0))},b=n[a];function d(m,f){return Array.from({length:f},(c,p)=>p===f-1?"🚀":p<m?"🟢":"⚪️").join(" ")}return H.createPortal(e.jsxs("div",{className:"onboarding-container",children:[e.jsxs("header",{className:"onboarding-header",children:[e.jsxs("h1",{className:"onboarding-title",children:[a+1,"/",n.length," ",b.title]}),e.jsx("span",{className:"onboarding-skip",onClick:v,children:o.onboarding.skip})]}),e.jsx("img",{className:"onboarding_avatar",src:"/img/tut-icon_512.png",alt:"Tills Ultimatives Trinkspiel"}),e.jsx("main",{className:"onboarding-main",children:e.jsx("div",{children:b.info})}),e.jsxs("footer",{className:"onboarding-navigation",children:[e.jsx("span",{className:`onboarding-back ${a===0?"disabled":""}`,onClick:a===0?void 0:x,children:o.onboarding.back}),e.jsx("span",{className:"onboarding-progress",children:d(a,n.length)}),e.jsx("span",{className:"onboarding-forward",onClick:j,children:a<n.length-1?o.onboarding.next:o.onboarding.done})]})]}),document.body)}function le({items:t,intervalMs:n,fadeDurationMs:i}){const[s,o]=g.useState(()=>Math.floor(Math.random()*t.length)),[a,r]=g.useState(!1);return g.useEffect(()=>{if(t.length===0)return;const h=setInterval(()=>{r(!0),setTimeout(()=>{o(v=>(v-1+t.length)%t.length),r(!1)},i)},n);return()=>clearInterval(h)},[t,n,i]),{currentItem:t[s],isFading:a}}const z="gameCounts";function J(){const t=localStorage.getItem(z);try{return t?JSON.parse(t):{}}catch{return{}}}function de(t){const n=J();n[t]=(n[t]||0)+1,localStorage.setItem(z,JSON.stringify(n))}const G=["favs","community","new","fy","shuffle"],A="sortOption";function me(t){const n=[...t];for(let i=n.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[n[i],n[s]]=[n[s],n[i]]}return n}const R={favs:.33,community:.33,new:.33};function M(){const[t,n]=g.useState(()=>localStorage.getItem(A)||G[3]);return g.useEffect(()=>{localStorage.setItem(A,t)},[t]),{sortOption:t,setSortOption:n}}function ue(){const{sortOption:t}=M();return{favs:"⭐️",community:"🔥",new:"🆕",fy:"🎯",shuffle:"🔀"}[t]??""}function ge(){const{sortOption:t}=M();return g.useMemo(()=>{const i=J(),s=Object.values(k).map(o=>({...o,count:i[o.id]||0}));if(t==="shuffle")return me(s);if(t==="community")return[...s].sort((o,a)=>(o.coummunityRank??999)-(a.coummunityRank??999));if(t==="new")return[...s].sort((o,a)=>(a.releaseOrder??0)-(o.releaseOrder??0));if(t==="favs")return[...s].sort((o,a)=>a.count-o.count);if(t==="fy"){let o=function(d){const m={};return d.forEach((f,c)=>m[f.id]=c),m};const a=[...s].sort((d,m)=>m.count-d.count),r=[...s].sort((d,m)=>(d.coummunityRank??999)-(m.coummunityRank??999)),h=[...s].sort((d,m)=>(m.releaseOrder??0)-(d.releaseOrder??0)),v=o(a),x=o(r),j=o(h),b=s.map(d=>{const m=v[d.id]*R.favs+x[d.id]*R.community+j[d.id]*R.new;return{game:d,score:m}});return b.sort((d,m)=>d.score!==m.score?d.score-m.score:(x[d.game.id]??999)-(x[m.game.id]??999)),b.map(d=>d.game)}else return[...s].sort((o,a)=>o.nameKey.localeCompare(a.nameKey))},[t])}const S=({src:t,alt:n,className:i,id:s,onClick:o})=>{const[a,r]=g.useState(!1);return e.jsxs(e.Fragment,{children:[!a&&e.jsx("div",{className:`${i??""} shimmer`}),e.jsx("img",{src:t,alt:n,className:i,id:s,onClick:o,onLoad:()=>r(!0),style:{display:a?"block":"none"}})]})};function he(){const{t,currentTranslation:n}=C(),i=K(),s=$.useRef(""),o=L(),[a,r]=g.useState(0),{currentItem:h,isFading:v}=le({items:Object.values(k),intervalMs:12e3,fadeDurationMs:600});function x(){let c;do{const p=Object.values(k);console.log(p),c=p[Math.floor(Math.random()*p.length)]}while(c.id===s.current);return s.current=c.id,c}$.useLayoutEffect(()=>{if(o.pathname==="/"){const c=document.getElementById("dynamicMiniGames"),p=sessionStorage.getItem("miniGamesScrollLeft");c&&p!==null&&(c.scrollLeft=parseInt(p,10),sessionStorage.removeItem("miniGamesScrollLeft"))}},[o]);const j=localStorage.getItem("onboarding-home-completed")==="true",[b,d]=g.useState(!1),m=ge(),f=I();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`main-container ${b?`onboarding-active onboarding-step-${a+1}`:""}`,children:[e.jsxs("div",{className:`kachel erste-kachel vorschlag-container ${v?"fading":""}`,onClick:()=>{f("button_click"),i(`/play?g=${h.id}`),T(h.id,"suggestion")},children:[e.jsx(S,{src:h.img_src,alt:`Vorschlag: ${t(h.nameKey)}`,className:"vorschlag-img"}),e.jsx("div",{className:"vorschlag-text",children:t(h.nameKey)}),e.jsx("div",{className:"vorschlag-description",children:t(h.descriptionKey)})]}),e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"titel-text",children:n.general.title}),e.jsx("div",{className:"button menu-home",onClick:()=>{f("button_click"),U("/"),i("/settings")},children:e.jsx(S,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsx("div",{className:"kachel zweite-kachel",onClick:()=>{if(f("button_click"),j){const c=x();i(`/play?g=${c.id}`),T(c.id,"random_game")}else d(!0),y("onboarding_home_started")},children:e.jsx(S,{src:"/img/tut-icon_splsh.webp",alt:n.general.title,className:"zweite-kachel-img"})}),e.jsxs("div",{className:"minigames-title-container",children:[e.jsx("div",{className:"minispiele-titel",children:n.general.minigames}),e.jsxs("div",{className:"icon-sort",onClick:()=>{f("button_click"),i("/settings/sort")},children:[e.jsx(S,{src:"/icons/sort.svg",alt:"Sort",className:"icon-sort-img"}),e.jsx("div",{className:"sort-label",children:ue()})]})]}),e.jsx("div",{className:"kachel dritte-kachel",children:e.jsx("div",{className:"minispiele-scroll",id:"dynamicMiniGames",children:Object.values(m).map(c=>e.jsxs("div",{className:"minispiel-item",onClick:()=>{f("button_click"),i(`/play?g=${c.id}`),T(c.id,"minigame_scroll")},style:{cursor:"pointer"},children:[e.jsx(S,{src:c.img_src,alt:t(c.nameKey),className:"minispiel-item-img"}),e.jsx("div",{className:"minispiel-name",children:t(c.nameKey)})]},c.id))})}),!j&&!b&&e.jsx(ce,{text:n.onboarding.hello})]}),e.jsx(Y,{page:"home",steps:Object.values(n.onboarding.home),visible:b,currentStep:c=>{r(c),c===0&&localStorage.getItem("onboarding-home-completed")==="true"&&d(!1)}})]})}function fe({visible:t,title:n,onClose:i,rulesText:s}){const o=I(),a=()=>{o("button_click"),i()};return H.createPortal(e.jsx("div",{className:`overlay-backdrop ${t?"fade-in":"fade-out"}`,children:e.jsxs("div",{className:"overlay-content",children:[e.jsx("div",{className:"overlay-title",children:n}),e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:s}}),e.jsx("div",{className:"overlay-footer",children:e.jsx("button",{className:"overlay-close-btn",onClick:a,children:"Schließen"})})]})}),document.body)}function pe(){const{t,currentTranslation:n}=C(),i=K(),s=L(),[o]=Q(),a=o.get("g")||"bombe",r=k[a],[h,v]=g.useState(0),[x,j]=g.useState(0),[b,d]=g.useState(!1),[m,f]=g.useState(!1),c=g.useRef(null),p=I();g.useEffect(()=>{c.current=Date.now()},[a]);function l(){if(c.current){const N=Math.round((Date.now()-c.current)/1e3);ie(a,N),de(a),c.current=null}}const u=()=>{p("button_click"),l(),i("/")},_=()=>{p("button_click"),j(N=>N+1),y("retry_button")},q=()=>{p("button_click"),d(N=>!N),y("share_button_opened")},[P,V]=g.useState(()=>{const N=localStorage.getItem("onboarding-home-completed")==="true",Z=localStorage.getItem("onboarding-play-completed")==="true";return N&&!Z});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`game-container ${P?`onboarding-active onboarding-step-${h+1}`:""}`,children:[e.jsxs("div",{className:"game-info",children:[e.jsx("div",{className:"button back-button",onClick:u,children:e.jsx(S,{src:"/icons/close.svg",alt:"Zurück",className:"button-img"})}),e.jsx(S,{src:r.img_src,alt:t(r.nameKey),className:"game-img"}),e.jsx("div",{className:"button menu-play",onClick:()=>{U(s.pathname+s.search),i("/settings")},children:e.jsx(S,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsxs("div",{className:"game-contolbar",children:[e.jsx("div",{className:"button",id:"share-button",onClick:q,children:e.jsx(S,{src:b?"/icons/arrow_up.svg":"/icons/ios_share.svg",alt:"Teilen",className:"button-img"})}),e.jsxs("div",{className:"game-name-wrapper",onClick:()=>{f(!0),y("game_rules_opened")},children:[e.jsx("div",{className:"game-name",children:t(r.nameKey)}),e.jsx("div",{className:"italic",children:n.play.tapInfo})]}),e.jsx("div",{className:"button",id:"retry-button",onClick:_,children:e.jsx(S,{src:"/icons/refresh.svg",alt:"Neu starten",className:"button-img"})})]}),e.jsx("div",{className:"game-widget",children:b?e.jsx(se,{url:window.location.href,game:r}):e.jsx(ne,{game:r,reload:x})})]}),e.jsx(fe,{visible:m,title:t(r.nameKey),rulesText:t(r.rulesKey),onClose:()=>f(!1)}),e.jsx(Y,{page:"play",steps:Object.values(n.onboarding.play),visible:P,currentStep:N=>{v(N),N===0&&localStorage.getItem("onboarding-play-completed")==="true"&&V(!1)}})]})}const B={instagram:"https://www.instagram.com/tyllyboy/",tiktok:"https://www.tiktok.com/@tyllyboy",linkedin:"https://www.linkedin.com/in/tillmann-woerner-211876261"},w=({title:t,items:n,onItemClick:i,getLabel:s,selectedKey:o})=>{const{currentTranslation:a}=C();return e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:t}),e.jsx("ul",{className:"settings-list",children:n.map(r=>e.jsxs("li",{className:"settings-list-item",onClick:()=>i(r),children:[e.jsx("span",{className:"settings-list-item-content",children:s(r)}),e.jsx("span",{className:"settings-list-item-right",children:o===r?e.jsx("span",{children:a.settings.selected}):r==="cookies"?e.jsx("span",{children:a.settings.change}):Object.values(a.settings.sections).includes(t)?e.jsx("span",{className:"settings-list-item-chevron"}):null})]},r))})]})};function D(){const t=K(),n=L(),i=decodeURIComponent(n.pathname.split("/settings/")[1]??""),{t:s,language:o,setLanguage:a,currentTranslation:r}=C(),{sortOption:h,setSortOption:v}=M(),x=r.settings.data,j=I(),b=l=>{var u;return(u=k[l])!=null&&u.nameKey?s(k[l].nameKey):s(`settings.items.${l}`)??l},d=()=>{j("button_click"),t(-1)},m=()=>{j("button_click"),t(oe())},f=l=>{var u,_;j("button_click"),l==="cookies"?((_=(u=window==null?void 0:window.Cookiebot)==null?void 0:u.show)==null||_.call(u),y("settings_cookies_change")):l==="help"?(localStorage.setItem("onboarding-home-completed","false"),localStorage.setItem("onboarding-play-completed","false"),t("/")):B[l]?(window.open(B[l],"_blank"),y("settings_social_"+l)):F.includes(l)?(a(l),y("settings_language_change_"+l)):G.includes(l)?(v(l),y("settings_sort_change_"+l)):(t(`/settings/${l}`),y("settings__"+l))},c=()=>i==="language"?e.jsxs(e.Fragment,{children:[e.jsx(w,{title:s("settings.selected"),items:[o],onItemClick:()=>{},getLabel:u=>s(`languages.${u}`),selectedKey:""}),e.jsx(w,{title:s("settings.items.language"),items:F,onItemClick:f,getLabel:u=>s(`languages.${u}`),selectedKey:o})]}):i==="sort"?e.jsxs(e.Fragment,{children:[e.jsx(w,{title:s("settings.selected"),items:[h],onItemClick:()=>{},getLabel:u=>s(`settings.items.${u}`),selectedKey:""}),e.jsx(w,{title:s("settings.options"),items:G,onItemClick:f,getLabel:u=>s(`settings.items.${u}`),selectedKey:h})]}):x[i]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:x[i].text}}):k[i]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:s(k[i].rulesKey)}}):i?e.jsx("p",{className:"overlay-body",children:s("settings.notFound")}):[{title:s("settings.sections.general"),items:["help","language","sort"]},{title:s("settings.sections.social"),items:["instagram","tiktok","linkedin"]},{title:s("settings.sections.rules"),items:Object.keys(k)},{title:s("settings.sections.legal"),items:["cookies","privacy","imprint","terms"]}].map(({title:u,items:_})=>e.jsx(w,{title:u,items:_,onItemClick:f,getLabel:b},u));function p(l){var u;return l?l==="language"?s("settings.items.language"):l==="sort"?s("settings.items.sort"):k[l]?s(`${l}.name`):(u=x[l])!=null&&u.id?s(`settings.items.${l}`):s("settings.notFound"):s("settings.title")}return e.jsxs("div",{className:"settings-container",children:[e.jsxs("header",{className:"settings-header",children:[i?e.jsx("span",{className:"header-back",onClick:d,children:s("settings.back")}):e.jsx("span",{className:"header-fertig",onClick:m,children:s("settings.done")}),e.jsx("h1",{className:"header-title",children:p(i)}),e.jsx("span",{className:"header-fertig invisible"})]}),e.jsx("main",{className:"settings-main",children:c()})]})}function be(){return ae(),e.jsx(te,{children:e.jsxs(W,{children:[e.jsx(O,{path:"/",element:e.jsx(he,{})}),e.jsx(O,{path:"/play",element:e.jsx(pe,{})}),e.jsx(O,{path:"/settings",element:e.jsx(D,{})}),e.jsx(O,{path:"/settings/:page",element:e.jsx(D,{})})]})})}X.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(ee,{children:e.jsx(be,{})})}));
