import{r as a,j as e,u as Q,a as U}from"./react-vendor-BAuTNlZx.js";import{u as y,g as B}from"./i18n-utility-aXviHUgs.js";import{u as W,a as Y,m as X}from"./framer-motion-DIIAZVqd.js";import{Q as Z}from"./qrcode-react-DGOd0oFt.js";const K="savedPath";function J(i){sessionStorage.setItem(K,i)}function Te(){return sessionStorage.getItem(K)||"/"}function M(){return a.useCallback(s=>{var n,r,l;const t={type:s};(r=(n=window.webkit)==null?void 0:n.messageHandlers)!=null&&r.iosListener?window.webkit.messageHandlers.iosListener.postMessage(t):(l=window.AndroidInterface)!=null&&l.postMessage&&window.AndroidInterface.postMessage(JSON.stringify(t))},[])}function V({start:i,direction:s,intervalMs:t=100,isRunning:n,onTick:r,onEnd:l,onStageChange:u,resetTrigger:c,stopTrigger:f}){const o=a.useRef(null),m=a.useRef(null),d=a.useRef(0),x=a.useRef("ready"),g=h=>{x.current!==h&&(x.current=h,u==null||u(h))},v=h=>{m.current===null&&(m.current=h);const p=(h-m.current)/1e3;let S=s==="up"?i+p:Math.max(0,i-p);if(h-d.current>=t&&(r==null||r(S,x.current),d.current=h),s==="down"&&S<=0){g("finished"),l==null||l();return}o.current=requestAnimationFrame(v)};a.useEffect(()=>(n?(g("running"),m.current=null,d.current=0,o.current=requestAnimationFrame(v)):x.current!=="finished"&&(g("ready"),o.current&&cancelAnimationFrame(o.current)),()=>{o.current&&cancelAnimationFrame(o.current)}),[n,c,f]),a.useEffect(()=>{f&&x.current==="running"&&(g("finished"),o.current&&cancelAnimationFrame(o.current),m.current=null,d.current=0,l==null||l())},[f])}var C=(i=>(i.Sec="sec",i.Tenth="tenth",i.Hundredth="hundredth",i.Thousandth="thousandth",i))(C||{});function k(i,s){let t;switch(s){case"sec":t=0;break;case"tenth":t=1;break;case"hundredth":t=2;break;case"thousandth":t=3;break;default:t=0}return i.toFixed(t)}const O=30,ee=({reload:i})=>{const{currentTranslation:s}=y(),[t,n]=a.useState("ready"),[r,l]=a.useState(O),[u,c]=a.useState(!1),f=M();a.useEffect(()=>{c(!1),n("ready"),l(O)},[i]),V({start:O,direction:"down",intervalMs:100,isRunning:u,onTick:l,onEnd:()=>{f("button_boom"),n("finished"),c(!1)},onStageChange:n});const o=()=>{f("button_click"),t==="ready"?(n("running"),c(!0)):t==="finished"&&(n("ready"),l(O),c(!1))},m={ready:"gradient-bombe",running:"gradient-bombe-running",finished:"gradient-implosion"}[t],d={ready:e.jsx(e.Fragment,{children:s.bombe.description}),running:e.jsxs(e.Fragment,{children:[s.bombe.description,e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),s.bombe.info.running]}),finished:e.jsx(e.Fragment,{children:s.bombe.info.finished})}[t],x=()=>{if(t==="finished")return"!BOOM!";const v=k(r,C.Tenth);return t==="running"&&r<27?"ðŸ’£":v},g={ready:s.bombe.info.readyFooter,finished:s.bombe.info.finishedFooter,running:null}[t];return e.jsxs("div",{className:`game-tile ${m}`,onClick:o,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:x()})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:d})}),g&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:g})})]})},L="game_records_ms";function $(i){const[s,t]=a.useState(null),[n,r]=a.useState(!1);a.useEffect(()=>{const u=localStorage.getItem(L);if(u){const c=JSON.parse(u);c[i]&&t(c[i])}},[i]);const l=a.useCallback(u=>{t(c=>{if(!(c===null||u<c.timeMs))return r(!1),c;const o={gameId:i,timeMs:u},m=localStorage.getItem(L),d=m?JSON.parse(m):{};return d[i]=o,localStorage.setItem(L,JSON.stringify(d)),r(!0),o})},[i]);return{record:s,saveRecord:l,isNewRecord:n,setIsNewRecord:r}}function q(i){const[s,t]=a.useState(null),[n,r]=a.useState(!1),l=a.useCallback(c=>{t(f=>f===null||c<f.timeMs?(r(!0),{timeMs:c}):(r(!1),f))},[i]),u=a.useCallback(()=>{t(null),r(!1)},[i]);return{roundsBest:s,isCurrentRoundBest:n,saveRoundsBest:l,resetRoundsBest:u}}const te=({reload:i})=>{const{currentTranslation:s}=y(),[t,n]=a.useState("ready"),[r,l]=a.useState(0),[u,c]=a.useState(!1),[f,o]=a.useState(!1),m=M(),{record:d,saveRecord:x,isNewRecord:g,setIsNewRecord:v}=$(B.reflex.id),{roundsBest:h,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:I}=q(B.reflex.id);a.useEffect(()=>{c(!1),o(!0),setTimeout(()=>{l(0),n("ready"),o(!1),S(),v(!1)},0)},[i]),V({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:l,onEnd:()=>{n("finished"),c(!1),o(!1)},onStageChange:n});const N=()=>{m("button_click"),t==="ready"?(n("running"),c(!0)):t==="finished"?(l(0),n("ready"),c(!1)):o(!0)};a.useEffect(()=>{const j=r-4;t==="finished"&&j>0&&(p(j),x(j))},[t,r,p,x]);const T=()=>{const j=r-4,E=k(j,C.Thousandth);let R="gradient-reflex",b="ðŸ”´ðŸ”´ðŸ”´",w=s.reflex.description,P=null;return t==="finished"?(j<0?(b=s.reflex.info.finishedFitText,w=s.reflex.info.finishedDescription):(b=E,w=""),P=s.reflex.info.finishedFooter):t==="running"?(R="gradient-reflex-running",j<-3?b="ðŸ”´ðŸ”´ðŸ”´":j<-2?b="ðŸŸ¢ðŸ”´ðŸ”´":j<-1?b="ðŸŸ¢ðŸŸ¢ðŸ”´":j<0?b="ðŸŸ¢ðŸŸ¢ðŸŸ¢":b=E,w=e.jsx(e.Fragment,{children:s.reflex.description}),P=s.reflex.info.running):(P=s.reflex.info.footer,w=s.reflex.description),{gradientClass:R,fitText:b,description:w,footerText:P}},{gradientClass:_,fitText:A,description:D,footerText:F}=T(),G=(d==null?void 0:d.timeMs)!=null?k(d.timeMs,C.Thousandth):"-.---",z=(h==null?void 0:h.timeMs)!=null?k(h.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${_}`,onClick:N,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",G," | ",z," ðŸ…",e.jsx("br",{}),g?s.play.new_record:I?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),D]})}),F&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:F})})]})},se=({reload:i})=>{const{currentTranslation:s}=y(),[t,n]=a.useState("ready"),[r,l]=a.useState(0),[u,c]=a.useState(!1),[f,o]=a.useState(!1),m=M(),{record:d,saveRecord:x,isNewRecord:g,setIsNewRecord:v}=$(B.speed.id),{roundsBest:h,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:I}=q(B.speed.id);a.useEffect(()=>{c(!1),o(!0),setTimeout(()=>{l(0),n("ready"),o(!1),S(),v(!1)},0)},[i]),V({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:l,onEnd:()=>{n("finished"),c(!1),o(!1),p(r),x(r)},onStageChange:n});const N=()=>{m("button_click"),t==="ready"?(n("running"),c(!0)):t==="finished"?(l(0),n("ready"),c(!1)):o(!0)},T=()=>{const z=k(r,C.Thousandth);let j="gradient-speed",E=z,R;switch(t){case"finished":R=e.jsx("span",{className:"pulse-3x",children:s.speed.info.finished});break;case"running":j="gradient-speed-running",R=e.jsx(e.Fragment,{children:s.speed.info.running});break;case"ready":default:R=e.jsx("span",{className:"pulse-3x",children:s.speed.info.ready})}return{gradientClass:j,fitText:E,footerText:R}},{gradientClass:_,fitText:A,footerText:D}=T(),F=(d==null?void 0:d.timeMs)!=null?k(d.timeMs,C.Thousandth):"-.---",G=(h==null?void 0:h.timeMs)!=null?k(h.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${_}`,onClick:N,role:"button",tabIndex:0,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",F," | ",G," ðŸ…",e.jsx("br",{}),g?s.play.new_record:I?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),s.speed.description]})}),e.jsx("div",{className:"fixed-footer",children:D})]})},ne=({reload:i})=>{const{currentTranslation:s}=y(),[t,n]=a.useState("ready"),[r,l]=a.useState(0),[u,c]=a.useState(!1),[f,o]=a.useState(!1),m=M(),{record:d,saveRecord:x,isNewRecord:g,setIsNewRecord:v}=$(B.timing.id),{roundsBest:h,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:I}=q(B.timing.id);a.useEffect(()=>{c(!1),o(!0),setTimeout(()=>{l(0),n("ready"),o(!1),S(),v(!1)},0)},[i]),V({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:l,onEnd:()=>{n("finished"),c(!1),o(!1)},onStageChange:n});const N=()=>{m("button_click"),t==="ready"?(n("running"),c(!0)):t==="finished"?(l(0),n("ready"),c(!1)):o(!0)};a.useEffect(()=>{t==="finished"&&r>=5&&(p(r),x(r))},[t,r,p,x]);const T=()=>{const j=k(r,C.Thousandth);let E="gradient-timing",R=j,b="",w=null;return t==="finished"?(r<5?(R=s.timing.info.finishedFitText,b=e.jsx(e.Fragment,{children:s.timing.info.finishedDescription})):b=e.jsx(e.Fragment,{children:s.timing.description}),w=e.jsx("span",{className:"pulse-3x",children:s.timing.info.finishedFooter})):t==="running"?(E="gradient-timing-running",b=e.jsx(e.Fragment,{children:s.timing.description}),w=s.timing.info.running):(b=e.jsx(e.Fragment,{children:s.timing.description}),w=e.jsx("span",{className:"pulse-3x",children:s.timing.info.footer})),{gradientClass:E,fitText:R,description:b,footerText:w}},{gradientClass:_,fitText:A,description:D,footerText:F}=T(),G=(d==null?void 0:d.timeMs)!=null?k(d.timeMs,C.Thousandth):"-.---",z=(h==null?void 0:h.timeMs)!=null?k(h.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${_}`,onClick:N,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",G," | ",z," ðŸ…",e.jsx("br",{}),g?s.play.new_record:I?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),D]})}),F&&e.jsx("div",{className:"fixed-footer",children:F})]})};function ie(i=5){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<i;n++)t+=s[Math.floor(Math.random()*s.length)];return t}function re(i){let s=2166136261;for(let t=0;t<i.length;t++)s^=i.charCodeAt(t),s=Math.imul(s,16777619);return s>>>0}function ae(i){return function(){let s=i+=1831565813;return s=Math.imul(s^s>>>15,s|1),s^=s+Math.imul(s^s>>>7,s|61),((s^s>>>14)>>>0)/4294967296}}function oe(i,s){const t=ae(re(s)),n=[...i];for(let r=n.length-1;r>0;r--){const l=Math.floor(t()*(r+1));[n[r],n[l]]=[n[l],n[r]]}return n}function ce(i,s,t=0){const[n]=a.useState(()=>s||ie()),[r,l]=a.useState(t),u=a.useMemo(()=>oe(i,n),[i,n]),c=u[(r%u.length+u.length)%u.length],f=a.useCallback(()=>{l(m=>m+1)},[]),o=a.useCallback(()=>{l(m=>m-1)},[]);return{item:c,seed:n,index:r,next:f,prev:o}}function H(i,s="never"){const[t,n]=Q(),r=U(),l=t.get("s")??void 0,u=Number.parseInt(t.get("i")??"0",10),{item:c,seed:f,index:o,next:m,prev:d}=ce(i,l,u);return a.useEffect(()=>{const x=t.get("s"),g=t.get("i");(x!==f||g!==o.toString())&&n({g:s,s:f,i:o.toString()},{replace:!0})},[f,o,r.search,n,s]),{item:c,index:o,next:m,prev:d}}const le=({game:i,reload:s})=>{const{currentTranslation:t}=y(),{item:n,index:r,next:l,prev:u}=H(t.never.data,i.id),c=M();a.useEffect(()=>{s&&r>0&&u()},[s]);const f=()=>{c("button_click"),l()},o=t.never.info.footer;return e.jsxs("div",{className:"game-tile gradient-never",onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:t.never.description})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:o})})]})},de=100,ue=({game:i,reload:s})=>{const{currentTranslation:t}=y(),{item:n,index:r,next:l,prev:u}=H(t.truefalse.data,i.id),c=W(0),f=Y(c,[-50,50],[-3,3]),[o,m]=a.useState("neutral"),[d,x]=a.useState(!1),g=M();a.useEffect(()=>{s&&r>0&&(u(),x(!1),m("neutral"))},[s]);const v=(()=>{switch(o){case"correct":return"linear-gradient(45deg, rgba(0, 230, 118, 0.5), rgba(0, 161, 82, 0.5))";case"wrong":return"linear-gradient(135deg, rgba(255, 23, 68, 0.5), rgba(183, 28, 28, 0.5))";default:return"linear-gradient(180deg, #1e3c72, #2a5298)"}})(),h=N=>{d||(N<-100?p(!0):N>de?p(!1):c.set(0))},p=N=>{N===n.answer?(g("button_click"),m("correct")):(g("button_boom"),m("wrong")),x(!0)},S=()=>{d&&(l(),m("neutral"),x(!1))},I=d?e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer1}):e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer2});return e.jsxs(X.div,{className:"game-tile",drag:"x",dragListener:!d,dragConstraints:{left:0,right:0},style:{x:c,rotate:f,background:v,touchAction:"pan-y"},onDragEnd:(N,T)=>h(T.offset.x),onPointerUp:S,whileTap:{scale:.99},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:d?o==="correct"?"âœ… âœ… âœ…":"âŒ âŒ âŒ":n.question})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:d?n.correct_answer:t.truefalse.description})}),e.jsx("div",{className:"fixed-footer",children:I})]})},fe=({game:i,reload:s})=>{const{currentTranslation:t}=y(),{item:n,index:r,next:l,prev:u}=H(t.schaetzmal.data,i.id),[c,f]=a.useState(""),[o,m]=a.useState(!1),d=a.useRef(null),[x,g]=a.useState("neutral"),v=M();a.useEffect(()=>{s&&r>0&&(u(),f(""),m(!1),g("neutral"),d.current&&(d.current.value=""))},[s]),a.useEffect(()=>{o&&d.current&&(d.current.focus(),d.current.scrollIntoView({behavior:"smooth",block:"center"}))},[o]);const h=T=>{var _;if(!((_=d.current)!=null&&_.contains(T.target))){if(v("button_click"),c!==""&&!o)if(x==="answered"){f(""),g("neutral"),l();return}else{g("answered"),m(!1);return}m(!o)}},p=()=>o?e.jsx("textarea",{ref:d,value:c,onChange:T=>f(T.target.value),className:"input-like-bottom",placeholder:"SchÃ¤tzung eingeben.","aria-label":"SchÃ¤tz-Eingabe",rows:3,tabIndex:0}):e.jsx("p",{children:c===""?t.schaetzmal.description:t.schaetzmal.info.answer+c}),I=x==="answered"?t.schaetzmal.info.footer1:c!==""&&o?t.schaetzmal.info.footer2:c!==""&&!o?t.schaetzmal.info.footer3:x==="neutral"&&o?t.schaetzmal.info.footer4:t.schaetzmal.info.footer5,N=p();return e.jsxs("div",{className:"game-tile gradient-schaetzmal",onClick:h,role:"button",tabIndex:0,onKeyDown:T=>{T.key===" "&&!o&&(T.preventDefault(),m(!0))},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:x==="neutral"?n.question:n.answer})}),e.jsx("div",{className:"tile-bottom",children:N}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:I})})]})},me=({game:i,reload:s})=>{const{currentTranslation:t}=y(),{item:n,index:r,next:l,prev:u}=H(t.sagwas.data,i.id),c=M();a.useEffect(()=>{s&&r>0&&u()},[s]);const f=()=>{c("button_click"),l()},o="gradient-sagmal",m=t.sagwas.info.footer;return e.jsxs("div",{className:`game-tile ${o}`,onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:t.sagwas.description})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:m})})]})},he=({setReload:i})=>{const s=U(),{currentTranslation:t}=y(),[n,r]=a.useState(!1),l=M(),u=()=>{if(l("button_click"),!n){r(!0);return}localStorage.setItem("tut-consent-given","true"),i()};return e.jsxs("div",{className:"game-tile gradient-disabled",onClick:u,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline text-center text-lg font-bold",children:t.consent.top})}),e.jsx("div",{className:"tile-bottom text-xs text-center px-2",children:n?e.jsx("p",{children:t.consent.bottom2}):e.jsxs("p",{children:[t.consent.bottom1,e.jsx("a",{href:"/#/settings/terms",onClick:()=>J(s.pathname+s.search),children:t.settings.items.terms})," & ",e.jsx("a",{href:"/#/settings/privacy",onClick:()=>J(s.pathname+s.search),children:t.settings.items.privacy})]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:n?t.consent.footer1:t.consent.footer2})})]})},xe={bombe:{Component:ee},reflex:{Component:te},speed:{Component:se},timing:{Component:ne},never:{Component:le},truefalse:{Component:ue},sagwas:{Component:me},schaetzmal:{Component:fe}},be=({game:i,reload:s})=>{const[t,n]=a.useState(()=>localStorage.getItem("tut-consent-given")!=="true");if(t)return e.jsx(he,{setReload:()=>n(!1)});const r=xe[i.id]??{Component:()=>e.jsx("div",{children:"coming soon"})};return e.jsx(r.Component,{game:i,reload:s})},Ne=({url:i,game:s})=>{const{currentTranslation:t}=y(),[n,r]=a.useState(!1),l=s?`gradient-${s.id}`:"gradient-default",u=M(),c=()=>{u("button_click"),navigator.clipboard.writeText(i).then(()=>{r(!0),setTimeout(()=>r(!1),4e3)}).catch(()=>{alert(t.share.alert)})},f=()=>n?t.share.copied:t.share.tapToCopy;return e.jsxs("div",{className:`game-tile ${l}`,onClick:c,children:[e.jsx("div",{className:"tile-top",children:e.jsx(Z,{value:i,className:"qr-code",bgColor:"transparent",fgColor:"white"})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{className:"fit-text-multiline",children:t.share.text})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:n?"":"pulse-3x",children:f()})})]})};export{be as G,Ne as S,Te as g,J as s,M as u};
