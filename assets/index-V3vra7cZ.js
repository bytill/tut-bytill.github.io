import{a as O,r as h,j as e,b as V,c as K,R as E,u as J,d as q,e as I,f as Z,H as Q}from"./react-vendor-BAuTNlZx.js";import{u as _,g as y,s as P,L as X}from"./i18n-utility-D1Zmw-8J.js";import{u as L,s as $,S as ee,G as te,g as ne}from"./games-UM6it8Wt.js";import"./vendor-D5KewTc8.js";import"./i18n-de-never-DEVRdBKE.js";import"./i18n-de-settings_data-DdyBTEFQ.js";import"./i18n-de-truefalse-Kz11CAeB.js";import"./i18n-de-sagWas-DF1h4mkh.js";import"./i18n-de-schaetzMal-Ca8elwcg.js";import"./i18n-de-kingscup-ZimsE_sz.js";import"./i18n-en-never-CSSF9yzg.js";import"./i18n-en-settings_data-B5ayvGXx.js";import"./i18n-en-truefalse-D5Kl3_os.js";import"./i18n-en-sagWas-DNxgOlrY.js";import"./i18n-en-schaetzMal-DUogxvyt.js";import"./i18n-en-kingscup-DidRIP7N.js";import"./framer-motion-DIIAZVqd.js";import"./qrcode-react-DGOd0oFt.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();function se(){const t=O();h.useEffect(()=>{var s,o;typeof window<"u"&&typeof window.gtag=="function"&&((o=(s=window.Cookiebot)==null?void 0:s.consent)==null?void 0:o.statistics)===!0&&window.gtag("event","page_view",{page_path:t.pathname+t.search+t.hash})},[t])}function M(t,s={}){var o,n;typeof window<"u"&&typeof window.gtag=="function"&&((n=(o=window.Cookiebot)==null?void 0:o.consent)==null?void 0:n.statistics)===!0&&window.gtag("event",t,s)}function T(t,s){M("game_start",{game:t,orgin:s})}function ie(t,s){M("game_end",{game:t,duration:s})}function S(t){M("button_click",{buttonName:t})}function ae(t="",s=50){const[o,n]=h.useState(0);return h.useEffect(()=>{if(n(0),!t)return;const i=setInterval(()=>{n(a=>{const r=a+1;return r>t.length&&clearInterval(i),r})},s);return()=>clearInterval(i)},[t,s]),t.slice(0,o)}function oe({text:t}){const s=ae(t,50);return e.jsx("div",{className:"speech-bubble fade-in",children:e.jsx("div",{className:"speech-bubble-text",children:s})})}const k=({src:t,alt:s,className:o,id:n,onClick:i})=>{const[a,r]=h.useState(!1);return e.jsxs(e.Fragment,{children:[!a&&e.jsx("div",{className:`${o??""} shimmer`}),e.jsx("img",{src:t,alt:s,className:o,id:n,onClick:i,onLoad:()=>r(!0),style:{display:a?"block":"none"}})]})};function D({page:t,steps:s,visible:o,currentStep:n}){const{currentTranslation:i}=_(),[a,r]=h.useState(0),d=L();if(h.useEffect(()=>{o&&n(a)},[a,o]),!o)return null;const b=()=>{d("button_click"),S(`onboarding_${t}skiped`),localStorage.setItem(`onboarding-${t}-completed`,"true"),n(0)},x=()=>{a>0&&(d("button_click"),r(c=>c-1))},j=()=>{a<s.length-1?(d("button_click"),r(c=>c+1)):(d("button_click"),S(`onboarding_${t}_completed`),localStorage.setItem(`onboarding-${t}-completed`,"true"),n(0))},p=s[a];function m(c,f){return Array.from({length:f},(u,v)=>v===f-1?"🚀":v<c?"🟢":"⚪️").join(" ")}return V.createPortal(e.jsxs("div",{className:"onboarding-container",children:[e.jsxs("header",{className:"onboarding-header",children:[e.jsxs("h1",{className:"onboarding-title",children:[a+1,"/",s.length," ",p.title]}),e.jsx("span",{className:"onboarding-skip",onClick:b,children:i.onboarding.skip})]}),e.jsx(k,{src:"/img/tut-icon_512.png",className:"onboarding_avatar",alt:"Tills Ultimatives Trinkspiel"}),e.jsx("main",{className:"onboarding-main",children:e.jsx("div",{children:p.info})}),e.jsxs("footer",{className:"onboarding-navigation",children:[e.jsx("span",{className:`onboarding-back ${a===0?"disabled":""}`,onClick:a===0?void 0:x,children:i.onboarding.back}),e.jsx("span",{className:"onboarding-progress",children:m(a,s.length)}),e.jsx("span",{className:"onboarding-forward",onClick:j,children:a<s.length-1?i.onboarding.next:i.onboarding.done})]})]}),document.body)}function re({items:t,intervalMs:s,fadeDurationMs:o}){const[n,i]=h.useState(()=>Math.floor(Math.random()*t.length)),[a,r]=h.useState(!1);return h.useEffect(()=>{if(t.length===0)return;const d=setInterval(()=>{r(!0),setTimeout(()=>{i(b=>(b-1+t.length)%t.length),r(!1)},o)},s);return()=>clearInterval(d)},[t,s,o]),{currentItem:t[n],isFading:a}}const U="gameCounts";function H(){const t=localStorage.getItem(U);try{return t?JSON.parse(t):{}}catch{return{}}}function ce(t){const s=H();s[t]=(s[t]||0)+1,localStorage.setItem(U,JSON.stringify(s))}const G=["favs","community","new","fy","shuffle"],A="sortOption";function le(t){const s=[...t];for(let o=s.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[s[o],s[n]]=[s[n],s[o]]}return s}const R={favs:.33,community:.33,new:.33};function F(){const[t,s]=h.useState(()=>localStorage.getItem(A)||G[3]);return h.useEffect(()=>{localStorage.setItem(A,t)},[t]),{sortOption:t,setSortOption:s}}function de(){const{sortOption:t}=F();return{favs:"⭐️",community:"🔥",new:"🆕",fy:"🎯",shuffle:"🔀"}[t]??""}function me(){const{sortOption:t}=F();return h.useMemo(()=>{const o=H(),n=Object.values(y).map(i=>({...i,count:o[i.id]||0}));if(t==="shuffle")return le(n);if(t==="community")return[...n].sort((i,a)=>(i.coummunityRank??999)-(a.coummunityRank??999));if(t==="new")return[...n].sort((i,a)=>(a.releaseOrder??0)-(i.releaseOrder??0));if(t==="favs")return[...n].sort((i,a)=>a.count-i.count);if(t==="fy"){let i=function(m){const c={};return m.forEach((f,u)=>c[f.id]=u),c};const a=[...n].sort((m,c)=>c.count-m.count),r=[...n].sort((m,c)=>(m.coummunityRank??999)-(c.coummunityRank??999)),d=[...n].sort((m,c)=>(c.releaseOrder??0)-(m.releaseOrder??0)),b=i(a),x=i(r),j=i(d),p=n.map(m=>{const c=b[m.id]*R.favs+x[m.id]*R.community+j[m.id]*R.new;return{game:m,score:c}});return p.sort((m,c)=>m.score!==c.score?m.score-c.score:(x[m.game.id]??999)-(x[c.game.id]??999)),p.map(m=>m.game)}else return[...n].sort((i,a)=>i.nameKey.localeCompare(a.nameKey))},[t])}function ue(){const{t,currentTranslation:s}=_(),o=K(),n=E.useRef(""),i=O(),[a,r]=h.useState(0),{currentItem:d,isFading:b}=re({items:Object.values(y),intervalMs:12e3,fadeDurationMs:600});function x(){let u;do{const v=Object.values(y);console.log(v),u=v[Math.floor(Math.random()*v.length)]}while(u.id===n.current);return n.current=u.id,u}E.useLayoutEffect(()=>{if(i.pathname==="/"){const u=document.getElementById("dynamicMiniGames"),v=sessionStorage.getItem("miniGamesScrollLeft");u&&v!==null&&(u.scrollLeft=parseInt(v,10),sessionStorage.removeItem("miniGamesScrollLeft"))}},[i]);const j=localStorage.getItem("onboarding-home-completed")==="true",[p,m]=h.useState(!1),c=me(),f=L();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`main-container ${p?`onboarding-active onboarding-step-${a+1}`:""}`,children:[e.jsxs("div",{className:`kachel erste-kachel vorschlag-container ${b?"fading":""}`,onClick:()=>{f("button_click"),o(`/play?g=${d.id}`),T(d.id,"suggestion")},children:[e.jsx(k,{src:d.img_src,alt:`Vorschlag: ${t(d.nameKey)}`,className:"vorschlag-img"}),e.jsx("div",{className:"vorschlag-text",children:t(d.nameKey)}),e.jsx("div",{className:"vorschlag-description",children:t(d.descriptionKey)})]}),e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"titel-text",children:s.general.title}),e.jsx("div",{className:"button menu-home",onClick:()=>{f("button_click"),$("/"),o("/settings")},children:e.jsx(k,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsx("div",{className:"kachel zweite-kachel",onClick:()=>{if(f("button_click"),j){const u=x();o(`/play?g=${u.id}`),T(u.id,"random_game")}else m(!0),S("onboarding_home_started")},children:e.jsx(k,{src:"/img/tut-icon_splsh.webp",alt:s.general.title,className:"zweite-kachel-img"})}),e.jsxs("div",{className:"minigames-title-container",children:[e.jsx("div",{className:"minispiele-titel",children:s.general.minigames}),e.jsxs("div",{className:"icon-sort",onClick:()=>{f("button_click"),o("/settings/sort")},children:[e.jsx(k,{src:"/icons/sort.svg",alt:"Sort",className:"icon-sort-img"}),e.jsx("div",{className:"sort-label",children:de()})]})]}),e.jsx("div",{className:"kachel dritte-kachel",children:e.jsx("div",{className:"minispiele-scroll",id:"dynamicMiniGames",children:Object.values(c).map(u=>e.jsxs("div",{className:"minispiel-item",onClick:()=>{f("button_click"),o(`/play?g=${u.id}`),T(u.id,"minigame_scroll")},style:{cursor:"pointer"},children:[e.jsx(k,{src:u.img_src,alt:t(u.nameKey),className:"minispiel-item-img"}),e.jsx("div",{className:"minispiel-name",children:t(u.nameKey)})]},u.id))})}),!j&&!p&&e.jsx(oe,{text:s.onboarding.hello})]}),e.jsx(D,{page:"home",steps:Object.values(s.onboarding.home),visible:p,currentStep:u=>{r(u),u===0&&localStorage.getItem("onboarding-home-completed")==="true"&&m(!1)}})]})}function ge(){const{t,currentTranslation:s}=_(),o=K(),n=O(),[i]=J(),a=i.get("g")||"bombe",r=y[a],[d,b]=h.useState(0),[x,j]=h.useState(0),[p,m]=h.useState(!1),c=h.useRef(null),f=L();h.useEffect(()=>{c.current=Date.now()},[a]);function u(){if(c.current){const N=Math.round((Date.now()-c.current)/1e3);ie(a,N),ce(a),c.current=null}}const v=()=>{f("button_click"),u(),o("/")},l=()=>{f("button_click"),j(N=>N+1),S("retry_button")},g=()=>{f("button_click"),m(N=>!N),S("share_button_opened")},[w,Y]=h.useState(()=>{const N=localStorage.getItem("onboarding-home-completed")==="true",z=localStorage.getItem("onboarding-play-completed")==="true";return N&&!z});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`game-container ${w?`onboarding-active onboarding-step-${d+1}`:""}`,children:[e.jsxs("div",{className:"game-info",children:[e.jsx("div",{className:"button back-button",onClick:v,children:e.jsx(k,{src:"/icons/close.svg",alt:"Zurück",className:"button-img"})}),e.jsx(k,{src:r.img_src,alt:t(r.nameKey),className:"game-img"}),e.jsx("div",{className:"button menu-play",onClick:()=>{f("button_click"),$(n.pathname+n.search),o("/settings")},children:e.jsx(k,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsxs("div",{className:"game-contolbar",children:[e.jsx("div",{className:"button",id:"share-button",onClick:g,children:e.jsx(k,{src:p?"/icons/arrow_up.svg":"/icons/ios_share.svg",alt:"Teilen",className:"button-img"})}),e.jsxs("div",{className:"game-name-wrapper",onClick:()=>{$(n.pathname+n.search),o(`/settings/${r.id}`)},children:[e.jsx("div",{className:"game-name",children:t(r.nameKey)}),e.jsx("div",{className:"italic",children:s.play.tapInfo})]}),e.jsx("div",{className:"button",id:"retry-button",onClick:l,children:e.jsx(k,{src:"/icons/refresh.svg",alt:"Neu starten",className:"button-img"})})]}),e.jsx("div",{className:"game-widget",children:p?e.jsx(ee,{url:window.location.href,game:r}):e.jsx(te,{game:r,reload:x})})]}),e.jsx(D,{page:"play",steps:Object.values(s.onboarding.play),visible:w,currentStep:N=>{b(N),N===0&&localStorage.getItem("onboarding-play-completed")==="true"&&Y(!1)}})]})}const W={instagram:"https://www.instagram.com/tyllyboy/",tiktok:"https://www.tiktok.com/@tyllyboy",linkedin:"https://www.linkedin.com/in/tillmann-woerner-211876261"},C=({title:t,items:s,onItemClick:o,getLabel:n,selectedKey:i})=>{const{currentTranslation:a}=_();return e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:t}),e.jsx("ul",{className:"settings-list",children:s.map(r=>e.jsxs("li",{className:"settings-list-item",onClick:()=>o(r),children:[e.jsx("span",{className:"settings-list-item-content",children:n(r)}),e.jsx("span",{className:"settings-list-item-right",children:i===r?e.jsx("span",{children:a.settings.selected}):r==="cookies"?e.jsx("span",{children:a.settings.change}):Object.values(a.settings.sections).includes(t)?e.jsx("span",{className:"settings-list-item-chevron"}):null})]},r))})]})};function B(){const t=K(),s=O(),o=decodeURIComponent(s.pathname.split("/settings/")[1]??""),{t:n,language:i,setLanguage:a,currentTranslation:r}=_(),{sortOption:d,setSortOption:b}=F(),x=r.settings.data,j=L(),p=l=>{var g;return(g=y[l])!=null&&g.nameKey?n(y[l].nameKey):n(`settings.items.${l}`)??l},m=()=>{j("button_click"),t(-1)},c=()=>{j("button_click"),t(ne())},f=l=>{var g,w;j("button_click"),l==="cookies"?((w=(g=window==null?void 0:window.Cookiebot)==null?void 0:g.show)==null||w.call(g),S("settings_cookies_change")):l==="help"?(localStorage.setItem("onboarding-home-completed","false"),localStorage.setItem("onboarding-play-completed","false"),t("/")):W[l]?(window.open(W[l],"_blank"),S("settings_social_"+l)):P.includes(l)?(a(l),S("settings_language_change_"+l)):G.includes(l)?(b(l),S("settings_sort_change_"+l)):(t(`/settings/${l}`),S("settings__"+l))},u=()=>o==="language"?e.jsxs(e.Fragment,{children:[e.jsx(C,{title:n("settings.selected"),items:[i],onItemClick:()=>{},getLabel:g=>n(`languages.${g}`),selectedKey:""}),e.jsx(C,{title:n("settings.items.language"),items:P,onItemClick:f,getLabel:g=>n(`languages.${g}`),selectedKey:i})]}):o==="sort"?e.jsxs(e.Fragment,{children:[e.jsx(C,{title:n("settings.selected"),items:[d],onItemClick:()=>{},getLabel:g=>n(`settings.items.${g}`),selectedKey:""}),e.jsx(C,{title:n("settings.options"),items:G,onItemClick:f,getLabel:g=>n(`settings.items.${g}`),selectedKey:d})]}):x[o]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:x[o].text}}):y[o]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:n(y[o].rulesKey)}}):o?e.jsx("p",{className:"overlay-body",children:n("settings.notFound")}):[{title:n("settings.sections.general"),items:["help","language","sort"]},{title:n("settings.sections.social"),items:["instagram","tiktok","linkedin"]},{title:n("settings.sections.rules"),items:Object.keys(y)},{title:n("settings.sections.legal"),items:["cookies","privacy","imprint","terms"]}].map(({title:g,items:w})=>e.jsx(C,{title:g,items:w,onItemClick:f,getLabel:p},g));function v(l){var g;return l?l==="language"?n("settings.items.language"):l==="sort"?n("settings.items.sort"):y[l]?n(`${l}.name`):(g=x[l])!=null&&g.id?n(`settings.items.${l}`):n("settings.notFound"):n("settings.title")}return e.jsxs("div",{className:"settings-container",children:[e.jsxs("header",{className:"settings-header",children:[o?e.jsx("span",{className:"header-back",onClick:m,children:n("settings.back")}):e.jsx("span",{className:"header-fertig",onClick:c,children:n("settings.done")}),e.jsx("h1",{className:"header-title",children:v(o)}),e.jsx("span",{className:"header-fertig invisible"})]}),e.jsxs("main",{className:"settings-main",children:[u(),e.jsx("section",{className:"settings-section",children:e.jsxs("h2",{className:"section-title",style:{fontSize:"10px",fontWeight:"500"},children:["© ",new Date().getFullYear()," TUT bytill",e.jsx("br",{}),"Made with ♥️ in Köln",e.jsx("br",{}),"Version ","1.0.3"]})})]})]})}function he(){const{currentTranslation:t}=_(),[s,o]=h.useState(!1),[n,i]=h.useState(!0);if(h.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(r=>{r&&r.addEventListener("updatefound",()=>{const d=r.installing;d&&d.addEventListener("statechange",()=>{d.state==="installed"&&navigator.serviceWorker.controller&&o(!0)})})})},[]),!s)return null;const a=()=>{i(!1),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(r=>{const d=r==null?void 0:r.waiting;if(d){const b=()=>window.location.reload();navigator.serviceWorker.addEventListener("controllerchange",b),d.postMessage({type:"SKIP_WAITING"})}else window.location.reload()})};return e.jsx("div",{className:`update-banner ${n?"visible":"hidden"}`,onClick:a,children:t.general.new_verion})}function fe(){return se(),e.jsxs(X,{children:[e.jsx(he,{}),e.jsxs(q,{children:[e.jsx(I,{path:"/",element:e.jsx(ue,{})}),e.jsx(I,{path:"/play",element:e.jsx(ge,{})}),e.jsx(I,{path:"/settings",element:e.jsx(B,{})}),e.jsx(I,{path:"/settings/:page",element:e.jsx(B,{})})]})]})}Z.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(Q,{children:e.jsx(fe,{})})}));
