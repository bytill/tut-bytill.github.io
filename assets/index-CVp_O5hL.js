import{a as K,r as u,j as e,b as Q,c as U,R as W,u as X,d as ee,e as R,f as te,H as se}from"./react-vendor-BAuTNlZx.js";import{u as L,g as y,s as Y,L as ne}from"./i18n-utility-e0lpjsgr.js";import{u as E,s as B,S as ae,G as ie,a as oe,b as re,g as ce,f as le,T as de}from"./games-CcYCdBPg.js";import"./vendor-D5KewTc8.js";import"./i18n-de-never-0OJbJD__.js";import"./i18n-de-settings_data-DdyBTEFQ.js";import"./i18n-de-truefalse-BQIPOYoo.js";import"./i18n-de-sagWas-Duq3XNBd.js";import"./i18n-de-schaetzMal-Bhy9qsnK.js";import"./i18n-de-kingscup-ZimsE_sz.js";import"./i18n-en-never-eYLLzge2.js";import"./i18n-en-settings_data-B5ayvGXx.js";import"./i18n-en-truefalse-DANi0_5j.js";import"./i18n-en-sagWas-D1YelrIv.js";import"./i18n-en-schaetzMal-CaghdYgb.js";import"./i18n-en-kingscup-DidRIP7N.js";import"./framer-motion-DIIAZVqd.js";import"./qrcode-react-DGOd0oFt.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function me(){const s=K();u.useEffect(()=>{var a,n;typeof window<"u"&&typeof window.gtag=="function"&&((n=(a=window.Cookiebot)==null?void 0:a.consent)==null?void 0:n.statistics)===!0&&window.gtag("event","page_view",{page_path:s.pathname+s.search+s.hash})},[s])}function z(s,a={}){var n,t;typeof window<"u"&&typeof window.gtag=="function"&&((t=(n=window.Cookiebot)==null?void 0:n.consent)==null?void 0:t.statistics)===!0&&window.gtag("event",s,a)}function M(s,a){z("game_start",{game:s,orgin:a})}function ge(s,a){z("game_end",{game:s,duration:a})}function C(s){z("button_click",{buttonName:s})}function ue(s="",a=50){const[n,t]=u.useState(0);return u.useEffect(()=>{if(t(0),!s)return;const o=setInterval(()=>{t(i=>{const r=i+1;return r>s.length&&clearInterval(o),r})},a);return()=>clearInterval(o)},[s,a]),s.slice(0,n)}function he({text:s}){const a=ue(s,50);return e.jsx("div",{className:"speech-bubble fade-in",children:e.jsx("div",{className:"speech-bubble-text",children:a})})}const k=({src:s,alt:a,className:n,id:t,onClick:o})=>{const[i,r]=u.useState(!1);return e.jsxs(e.Fragment,{children:[!i&&e.jsx("div",{className:`${n??""} shimmer`}),e.jsx("img",{src:s,alt:a,className:n,id:t,onClick:o,onLoad:()=>r(!0),style:{display:i?"block":"none"}})]})};function V({page:s,steps:a,visible:n,currentStep:t}){const{currentTranslation:o}=L(),[i,r]=u.useState(0),c=E();if(u.useEffect(()=>{n&&t(i)},[i,n]),!n)return null;const x=()=>{c("button_click"),C(`onboarding_${s}skiped`),localStorage.setItem(`onboarding-${s}-completed`,"true"),t(0)},N=()=>{i>0&&(c("button_click"),r(d=>d-1))},S=()=>{i<a.length-1?(c("button_click"),r(d=>d+1)):(c("button_click"),C(`onboarding_${s}_completed`),localStorage.setItem(`onboarding-${s}-completed`,"true"),t(0))},p=a[i];function m(d,f){return Array.from({length:f},(g,j)=>j===f-1?"ðŸš€":j<d?"ðŸŸ¢":"âšªï¸").join(" ")}return Q.createPortal(e.jsxs("div",{className:"onboarding-container",children:[e.jsxs("header",{className:"onboarding-header",children:[e.jsxs("h1",{className:"onboarding-title",children:[i+1,"/",a.length," ",p.title]}),e.jsx("span",{className:"onboarding-skip",onClick:x,children:o.onboarding.skip})]}),e.jsx(k,{src:"/img/tut-icon_512.png",className:"onboarding_avatar",alt:"Tills Ultimatives Trinkspiel"}),e.jsx("main",{className:"onboarding-main",children:e.jsx("div",{children:p.info})}),e.jsxs("footer",{className:"onboarding-navigation",children:[e.jsx("span",{className:`onboarding-back ${i===0?"disabled":""}`,onClick:i===0?void 0:N,children:o.onboarding.back}),e.jsx("span",{className:"onboarding-progress",children:m(i,a.length)}),e.jsx("span",{className:"onboarding-forward",onClick:S,children:i<a.length-1?o.onboarding.next:o.onboarding.done})]})]}),document.body)}function fe({items:s,intervalMs:a,fadeDurationMs:n}){const[t,o]=u.useState(()=>Math.floor(Math.random()*s.length)),[i,r]=u.useState(!1);return u.useEffect(()=>{if(s.length===0)return;const c=setInterval(()=>{r(!0),setTimeout(()=>{o(x=>(x-1+s.length)%s.length),r(!1)},n)},a);return()=>clearInterval(c)},[s,a,n]),{currentItem:s[t],isFading:i}}const Z="gameCounts";function q(){const s=localStorage.getItem(Z);try{return s?JSON.parse(s):{}}catch{return{}}}function pe(s){const a=q();a[s]=(a[s]||0)+1,localStorage.setItem(Z,JSON.stringify(a))}const D=["favs","community","new","fy","shuffle"],J="sortOption";function be(s){const a=[...s];for(let n=a.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[a[n],a[t]]=[a[t],a[n]]}return a}const F={favs:.33,community:.33,new:.33};function H(){const[s,a]=u.useState(()=>localStorage.getItem(J)||D[3]);return u.useEffect(()=>{localStorage.setItem(J,s)},[s]),{sortOption:s,setSortOption:a}}function xe(){const{sortOption:s}=H();return{favs:"â­ï¸",community:"ðŸ”¥",new:"ðŸ†•",fy:"ðŸŽ¯",shuffle:"ðŸ”€"}[s]??""}function je(){const{sortOption:s}=H();return u.useMemo(()=>{const n=q(),t=Object.values(y).map(o=>({...o,count:n[o.id]||0}));if(s==="shuffle")return be(t);if(s==="community")return[...t].sort((o,i)=>(o.coummunityRank??999)-(i.coummunityRank??999));if(s==="new")return[...t].sort((o,i)=>(i.releaseOrder??0)-(o.releaseOrder??0));if(s==="favs")return[...t].sort((o,i)=>i.count-o.count);if(s==="fy"){let o=function(m){const d={};return m.forEach((f,g)=>d[f.id]=g),d};const i=[...t].sort((m,d)=>d.count-m.count),r=[...t].sort((m,d)=>(m.coummunityRank??999)-(d.coummunityRank??999)),c=[...t].sort((m,d)=>(d.releaseOrder??0)-(m.releaseOrder??0)),x=o(i),N=o(r),S=o(c),p=t.map(m=>{const d=x[m.id]*F.favs+N[m.id]*F.community+S[m.id]*F.new;return{game:m,score:d}});return p.sort((m,d)=>m.score!==d.score?m.score-d.score:(N[m.game.id]??999)-(N[d.game.id]??999)),p.map(m=>m.game)}else return[...t].sort((o,i)=>o.nameKey.localeCompare(i.nameKey))},[s])}function ve(){const{t:s,currentTranslation:a}=L(),n=U(),t=W.useRef(""),o=K(),[i,r]=u.useState(0),{currentItem:c,isFading:x}=fe({items:Object.values(y),intervalMs:12e3,fadeDurationMs:600});function N(){let g;do{const j=Object.values(y);console.log(j),g=j[Math.floor(Math.random()*j.length)]}while(g.id===t.current);return t.current=g.id,g}W.useLayoutEffect(()=>{if(o.pathname==="/"){const g=document.getElementById("dynamicMiniGames"),j=sessionStorage.getItem("miniGamesScrollLeft");g&&j!==null&&(g.scrollLeft=parseInt(j,10),sessionStorage.removeItem("miniGamesScrollLeft"))}},[o]);const S=localStorage.getItem("onboarding-home-completed")==="true",[p,m]=u.useState(!1),d=je(),f=E();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`main-container ${p?`onboarding-active onboarding-step-${i+1}`:""}`,children:[e.jsxs("div",{className:`kachel erste-kachel vorschlag-container ${x?"fading":""}`,onClick:()=>{f("button_click"),n(`/play?g=${c.id}`),M(c.id,"suggestion")},children:[e.jsx(k,{src:c.img_src,alt:`Vorschlag: ${s(c.nameKey)}`,className:"vorschlag-img"}),e.jsx("div",{className:"vorschlag-text",children:s(c.nameKey)}),e.jsx("div",{className:"vorschlag-description",children:s(c.descriptionKey)})]}),e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"titel-text",children:a.general.title}),e.jsx("div",{className:"button menu-home",onClick:()=>{f("button_click"),B("/"),n("/settings")},children:e.jsx(k,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsx("div",{className:"kachel zweite-kachel",onClick:()=>{if(f("button_click"),S){const g=N();n(`/play?g=${g.id}`),M(g.id,"random_game")}else m(!0),C("onboarding_home_started")},children:e.jsx(k,{src:"/img/tut-icon_splsh.webp",alt:a.general.title,className:"zweite-kachel-img"})}),e.jsxs("div",{className:"minigames-title-container",children:[e.jsx("div",{className:"minispiele-titel",children:a.general.minigames}),e.jsxs("div",{className:"icon-sort",onClick:()=>{f("button_click"),n("/settings/sort")},children:[e.jsx(k,{src:"/icons/sort.svg",alt:"Sort",className:"icon-sort-img"}),e.jsx("div",{className:"sort-label",children:xe()})]})]}),e.jsx("div",{className:"kachel dritte-kachel",children:e.jsx("div",{className:"minispiele-scroll",id:"dynamicMiniGames",children:Object.values(d).map(g=>e.jsxs("div",{className:"minispiel-item",onClick:()=>{f("button_click"),n(`/play?g=${g.id}`),M(g.id,"minigame_scroll")},style:{cursor:"pointer"},children:[e.jsx(k,{src:g.img_src,alt:s(g.nameKey),className:"minispiel-item-img"}),e.jsx("div",{className:"minispiel-name",children:s(g.nameKey)})]},g.id))})}),!S&&!p&&e.jsx(he,{text:a.onboarding.hello})]}),e.jsx(V,{page:"home",steps:Object.values(a.onboarding.home),visible:p,currentStep:g=>{r(g),g===0&&localStorage.getItem("onboarding-home-completed")==="true"&&m(!1)}})]})}function ye(){const{t:s,currentTranslation:a}=L(),n=U(),t=K(),[o]=X(),i=o.get("g")||"bombe",r=y[i],[c,x]=u.useState(0),[N,S]=u.useState(0),[p,m]=u.useState(!1),d=u.useRef(null),f=E();u.useEffect(()=>{d.current=Date.now()},[i]);function g(){if(d.current){const b=Math.round((Date.now()-d.current)/1e3);ge(i,b),pe(i),d.current=null}}const j=()=>{f("button_click"),g(),n("/")},I=()=>{f("button_click"),S(b=>b+1),C("retry_button")},G=()=>{f("button_click"),m(b=>!b),C("share_button_opened")},[T,h]=u.useState(()=>{const b=localStorage.getItem("onboarding-home-completed")==="true",O=localStorage.getItem("onboarding-play-completed")==="true";return b&&!O});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`game-container ${T?`onboarding-active onboarding-step-${c+1}`:""}`,children:[e.jsxs("div",{className:"game-info",children:[e.jsx("div",{className:"button back-button",onClick:j,children:e.jsx(k,{src:"/icons/close.svg",alt:"ZurÃ¼ck",className:"button-img"})}),e.jsx(k,{src:r.img_src,alt:s(r.nameKey),className:"game-img"}),e.jsx("div",{className:"button menu-play",onClick:()=>{f("button_click"),B(t.pathname+t.search),n("/settings")},children:e.jsx(k,{src:"/icons/menu.svg",alt:"Menu",className:"menu-img"})})]}),e.jsxs("div",{className:"game-contolbar",children:[e.jsx("div",{className:"button",id:"share-button",onClick:G,children:e.jsx(k,{src:p?"/icons/arrow_up.svg":"/icons/ios_share.svg",alt:"Teilen",className:"button-img"})}),e.jsxs("div",{className:"game-name-wrapper",onClick:()=>{B(t.pathname+t.search),n(`/settings/${r.id}`)},children:[e.jsx("div",{className:"game-name",children:s(r.nameKey)}),e.jsx("div",{className:"italic",children:a.play.tapInfo})]}),e.jsx("div",{className:"button",id:"retry-button",onClick:I,children:e.jsx(k,{src:"/icons/refresh.svg",alt:"Neu starten",className:"button-img"})})]}),e.jsx("div",{className:"game-widget",children:p?e.jsx(ae,{url:window.location.href,game:r}):e.jsx(ie,{game:r,reload:N})})]}),e.jsx(V,{page:"play",steps:Object.values(a.onboarding.play),visible:T,currentStep:b=>{x(b),b===0&&localStorage.getItem("onboarding-play-completed")==="true"&&h(!1)}})]})}const P={instagram:"https://www.instagram.com/tyllyboy/",tiktok:"https://www.tiktok.com/@tyllyboy",linkedin:"https://www.linkedin.com/in/tillmann-woerner-211876261"},w=({title:s,items:a,onItemClick:n,getLabel:t,selectedKey:o})=>{const{currentTranslation:i}=L(),r=c=>o===c?e.jsx("span",{children:i.settings.selected}):c==="cookies"?e.jsx("span",{children:i.settings.change}):Object.values(i.settings.sections).includes(s)||i.settings.title===s?e.jsx("span",{className:"settings-list-item-chevron"}):null;return e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:s}),e.jsx("ul",{className:"settings-list",children:a.map(c=>e.jsxs("li",{className:`settings-list-item ${c==="settings.items.delete_records"?"delete-record-item":""}`,onClick:()=>n(c),children:[e.jsx("span",{className:"settings-list-item-content",children:t(c)}),e.jsx("span",{className:"settings-list-item-right",children:r(c)})]},c))})]})};function A(){var T;const s=U(),a=K(),n=decodeURIComponent(a.pathname.split("/settings/")[1]??""),{t,language:o,setLanguage:i,currentTranslation:r}=L(),{sortOption:c,setSortOption:x}=H(),N=E(),S=n.includes("delete_records")?n.replace("/delete_records",""):"",{record:p,deleteRecord:m}=oe((T=y[S])==null?void 0:T.id),d=n.includes("category")?n.replace("/category",""):"",{category:f,saveCategory:g}=re(d),j=()=>{var h;return n?n==="language"?t("settings.items.language"):n==="sort"?t("settings.items.sort"):y[n]?t(y[n].nameKey):(h=r.settings.data[n])!=null&&h.id?t(`settings.items.${n}`):n.includes("rules")?t("settings.items.rules"):n.includes("category")?t("settings.category"):n.includes("delete_records")?t("settings.items.delete_records"):t("settings.notFound"):t("settings.title")},I=h=>{var l,v;N("button_click"),C("settings_item_click_"+h);const b=_=>{s(_),C("settings_navigate_"+_.replace(/[^a-zA-Z0-9]/g,"_"))},O=_=>{window.open(_,"_blank"),C("settings_social_"+h)};h==="cookies"?(v=(l=window==null?void 0:window.Cookiebot)==null?void 0:l.show)==null||v.call(l):h==="help"?n===""?(localStorage.setItem("onboarding-home-completed","false"),localStorage.setItem("onboarding-play-completed","false"),b("/")):(localStorage.setItem("onboarding-home-completed","true"),localStorage.setItem("onboarding-play-completed","false"),b(`/play?g=${n}`)):P[h]?O(P[h]):Y.includes(h)?i(h):D.includes(h)?x(h):b(n===""?`/settings/${h}`:`/settings/${n}/${h}`)},G=()=>{var O;const h=l=>{var v;return(v=y[l])!=null&&v.nameKey?t(y[l].nameKey):t(`settings.items.${l}`)??l};if(n==="language")return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:t("settings.selected"),items:[o],onItemClick:()=>{},getLabel:l=>t(`languages.${l}`),selectedKey:""}),e.jsx(w,{title:t("settings.items.language"),items:Y,onItemClick:I,getLabel:l=>t(`languages.${l}`),selectedKey:o})]});if(n==="sort")return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:t("settings.selected"),items:[c],onItemClick:()=>{},getLabel:l=>t(`settings.items.${l}`),selectedKey:""}),e.jsx(w,{title:t("settings.options"),items:D,onItemClick:I,getLabel:l=>t(`settings.items.${l}`),selectedKey:c})]});if(r.settings.data[n])return e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:r.settings.data[n].text}});if(y[n]){const l=[{title:t("settings.title"),items:["rules","help"]}];return["schaetzmal","never","truefalse","sagwas"].includes(n)&&l[0].items.unshift("category"),["reflex","speed","timing"].includes(n)&&l[0].items.unshift("delete_records"),l.map(({title:v,items:_})=>e.jsx(w,{title:v,items:_,onItemClick:I,getLabel:h},v))}if(n.includes("rules")){const l=n.replace("/rules","");return y[l]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:t(y[l].rulesKey)}}):e.jsx("p",{className:"overlay-body",children:t("settings.notFound")})}if(n.includes("category")){const l=n.replace("/category",""),_=["all",...Object.keys(((O=r[l])==null?void 0:O.category)??{})];return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:t("settings.selected"),items:[f],onItemClick:()=>{},getLabel:$=>t($==="all"?"settings.all":`${l}.category.${$}`),selectedKey:""}),e.jsx(w,{title:t("settings.items.category"),items:_,onItemClick:g,getLabel:$=>t($==="all"?"settings.all":`${l}.category.${$}`),selectedKey:f})]})}if(n.includes("delete_records")){const l=(p==null?void 0:p.timeMs)!=null?le(p.timeMs,de.Thousandth):"-.---";return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:t("settings.your_record"),items:["ðŸ†"+l],onItemClick:()=>{},getLabel:()=>"ðŸ†"+l,selectedKey:""}),e.jsx(w,{title:"",items:["settings.items.delete_records"],onItemClick:m,getLabel:v=>t(v),selectedKey:""})]})}return[{title:t("settings.sections.general"),items:["help","language","sort"]},{title:t("settings.sections.social"),items:Object.keys(P)},{title:t("settings.sections.minigames_settings"),items:Object.keys(y)},{title:t("settings.sections.legal"),items:["cookies","privacy","imprint","terms"]}].map(({title:l,items:v})=>e.jsx(w,{title:l,items:v,onItemClick:I,getLabel:h},l))};return e.jsxs("div",{className:"settings-container",children:[e.jsxs("header",{className:"settings-header",children:[n?e.jsx("span",{className:"header-back",onClick:()=>s(-1),children:t("settings.back")}):e.jsx("span",{className:"header-fertig",onClick:()=>s(ce()),children:t("settings.done")}),e.jsx("h1",{className:"header-title",children:j()}),e.jsx("span",{className:"header-fertig invisible"})]}),e.jsxs("main",{className:"settings-main",children:[G(),e.jsx("section",{className:"settings-section",children:e.jsxs("h2",{className:"section-title",style:{fontSize:"10px",fontWeight:"500"},children:["Â© ",new Date().getFullYear()," TUT bytill",e.jsx("br",{}),"Made with â™¥ï¸ in KÃ¶ln",e.jsx("br",{}),"v","1.1.0"]})})]})]})}function Ne(){const{currentTranslation:s}=L(),[a,n]=u.useState(!1),[t,o]=u.useState(!0);if(u.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(r=>{r&&r.addEventListener("updatefound",()=>{const c=r.installing;c&&c.addEventListener("statechange",()=>{c.state==="installed"&&navigator.serviceWorker.controller&&n(!0)})})})},[]),!a)return null;const i=()=>{o(!1),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(r=>{const c=r==null?void 0:r.waiting;if(c){const x=()=>window.location.reload();navigator.serviceWorker.addEventListener("controllerchange",x),c.postMessage({type:"SKIP_WAITING"})}else window.location.reload()})};return e.jsx("div",{className:`update-banner ${t?"visible":"hidden"}`,onClick:i,children:s.general.new_verion})}function ke(){return me(),e.jsxs(ne,{children:[e.jsx(Ne,{}),e.jsxs(ee,{children:[e.jsx(R,{path:"/",element:e.jsx(ve,{})}),e.jsx(R,{path:"/play",element:e.jsx(ye,{})}),e.jsx(R,{path:"/settings",element:e.jsx(A,{})}),e.jsx(R,{path:"/settings/:page",element:e.jsx(A,{})}),e.jsx(R,{path:"/settings/:page/:page",element:e.jsx(A,{})})]})]})}te.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(se,{children:e.jsx(ke,{})})}));
