import{r as a,j as e,u as K,a as Q}from"./react-vendor-BAuTNlZx.js";import{u as k,g as I}from"./i18n-utility-D1Zmw-8J.js";import{u as W,a as Y,m as X}from"./framer-motion-DIIAZVqd.js";import{Q as Z}from"./qrcode-react-DGOd0oFt.js";const U="savedPath";function J(r){sessionStorage.setItem(U,r)}function Ne(){return sessionStorage.getItem(U)||"/"}function R(){return a.useCallback(s=>{var n,i,c;const t={type:s};(i=(n=window.webkit)==null?void 0:n.messageHandlers)!=null&&i.iosListener?window.webkit.messageHandlers.iosListener.postMessage(t):(c=window.AndroidInterface)!=null&&c.postMessage&&window.AndroidInterface.postMessage(JSON.stringify(t))},[])}function H({start:r,direction:s,intervalMs:t=100,isRunning:n,onTick:i,onEnd:c,onStageChange:u,resetTrigger:o,stopTrigger:f}){const l=a.useRef(null),m=a.useRef(null),d=a.useRef(0),h=a.useRef("ready"),g=x=>{h.current!==x&&(h.current=x,u==null||u(x))},v=x=>{m.current===null&&(m.current=x);const p=(x-m.current)/1e3;let S=s==="up"?r+p:Math.max(0,r-p);if(x-d.current>=t&&(i==null||i(S,h.current),d.current=x),s==="down"&&S<=0){g("finished"),c==null||c();return}l.current=requestAnimationFrame(v)};a.useEffect(()=>(n?(g("running"),m.current=null,d.current=0,l.current=requestAnimationFrame(v)):h.current!=="finished"&&(g("ready"),l.current&&cancelAnimationFrame(l.current)),()=>{l.current&&cancelAnimationFrame(l.current)}),[n,o,f]),a.useEffect(()=>{f&&h.current==="running"&&(g("finished"),l.current&&cancelAnimationFrame(l.current),m.current=null,d.current=0,c==null||c())},[f])}var C=(r=>(r.Sec="sec",r.Tenth="tenth",r.Hundredth="hundredth",r.Thousandth="thousandth",r))(C||{});function M(r,s){let t;switch(s){case"sec":t=0;break;case"tenth":t=1;break;case"hundredth":t=2;break;case"thousandth":t=3;break;default:t=0}return r.toFixed(t)}const V=30,ee=({reload:r})=>{const{currentTranslation:s}=k(),[t,n]=a.useState("ready"),[i,c]=a.useState(V),[u,o]=a.useState(!1),f=R();a.useEffect(()=>{o(!1),n("ready"),c(V)},[r]),H({start:V,direction:"down",intervalMs:100,isRunning:u,onTick:c,onEnd:()=>{f("button_boom"),n("finished"),o(!1)},onStageChange:n});const l=()=>{f("button_click"),t==="ready"?(n("running"),o(!0)):t==="finished"&&(n("ready"),c(V),o(!1))},m={ready:"gradient-bombe",running:"gradient-bombe-running",finished:"gradient-implosion"}[t],d={ready:e.jsx(e.Fragment,{children:s.bombe.description}),running:e.jsxs(e.Fragment,{children:[s.bombe.description,e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),s.bombe.info.running]}),finished:e.jsx(e.Fragment,{children:s.bombe.info.finished})}[t],h=()=>{if(t==="finished")return"!BOOM!";const v=M(i,C.Tenth);return t==="running"&&i<27?"ðŸ’£":v},g={ready:s.bombe.info.readyFooter,finished:s.bombe.info.finishedFooter,running:null}[t];return e.jsxs("div",{className:`game-tile ${m}`,onClick:l,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:h()})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:d})}),g&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:g})})]})},L="game_records_ms";function $(r){const[s,t]=a.useState(null),[n,i]=a.useState(!1);a.useEffect(()=>{const u=localStorage.getItem(L);if(u){const o=JSON.parse(u);o[r]&&t(o[r])}},[r]);const c=a.useCallback(u=>{t(o=>{if(!(o===null||u<o.timeMs))return i(!1),o;const l={gameId:r,timeMs:u},m=localStorage.getItem(L),d=m?JSON.parse(m):{};return d[r]=l,localStorage.setItem(L,JSON.stringify(d)),i(!0),l})},[r]);return{record:s,saveRecord:c,isNewRecord:n,setIsNewRecord:i}}function q(r){const[s,t]=a.useState(null),[n,i]=a.useState(!1),c=a.useCallback(o=>{t(f=>f===null||o<f.timeMs?(i(!0),{timeMs:o}):(i(!1),f))},[r]),u=a.useCallback(()=>{t(null),i(!1)},[r]);return{roundsBest:s,isCurrentRoundBest:n,saveRoundsBest:c,resetRoundsBest:u}}const te=({reload:r})=>{const{currentTranslation:s}=k(),[t,n]=a.useState("ready"),[i,c]=a.useState(0),[u,o]=a.useState(!1),[f,l]=a.useState(!1),m=R(),{record:d,saveRecord:h,isNewRecord:g,setIsNewRecord:v}=$(I.reflex.id),{roundsBest:x,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:_}=q(I.reflex.id);a.useEffect(()=>{o(!1),l(!0),setTimeout(()=>{c(0),n("ready"),l(!1),S(),v(!1)},0)},[r]),H({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:c,onEnd:()=>{n("finished"),o(!1),l(!1)},onStageChange:n});const T=()=>{m("button_click"),t==="ready"?(n("running"),o(!0)):t==="finished"?(c(0),n("ready"),o(!1)):l(!0)};a.useEffect(()=>{const j=i-4;t==="finished"&&j>0&&(p(j),h(j))},[t,i,p,h]);const b=()=>{const j=i-4,B=M(j,C.Thousandth);let w="gradient-reflex",N="ðŸ”´ðŸ”´ðŸ”´",y=s.reflex.description,O=null;return t==="finished"?(j<0?(N=s.reflex.info.finishedFitText,y=s.reflex.info.finishedDescription):(N=B,y=""),O=s.reflex.info.finishedFooter):t==="running"?(w="gradient-reflex-running",j<-3?N="ðŸ”´ðŸ”´ðŸ”´":j<-2?N="ðŸŸ¢ðŸ”´ðŸ”´":j<-1?N="ðŸŸ¢ðŸŸ¢ðŸ”´":j<0?N="ðŸŸ¢ðŸŸ¢ðŸŸ¢":N=B,y=e.jsx(e.Fragment,{children:s.reflex.description}),O=s.reflex.info.running):(O=s.reflex.info.footer,y=s.reflex.description),{gradientClass:w,fitText:N,description:y,footerText:O}},{gradientClass:E,fitText:A,description:G,footerText:F}=b(),D=(d==null?void 0:d.timeMs)!=null?M(d.timeMs,C.Thousandth):"-.---",z=(x==null?void 0:x.timeMs)!=null?M(x.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${E}`,onClick:T,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",D," | ",z," ðŸ…",e.jsx("br",{}),g?s.play.new_record:_?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),G]})}),F&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:F})})]})},se=({reload:r})=>{const{currentTranslation:s}=k(),[t,n]=a.useState("ready"),[i,c]=a.useState(0),[u,o]=a.useState(!1),[f,l]=a.useState(!1),m=R(),{record:d,saveRecord:h,isNewRecord:g,setIsNewRecord:v}=$(I.speed.id),{roundsBest:x,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:_}=q(I.speed.id);a.useEffect(()=>{o(!1),l(!0),setTimeout(()=>{c(0),n("ready"),l(!1),S(),v(!1)},0)},[r]),H({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:c,onEnd:()=>{n("finished"),o(!1),l(!1),p(i),h(i)},onStageChange:n});const T=()=>{m("button_click"),t==="ready"?(n("running"),o(!0)):t==="finished"?(c(0),n("ready"),o(!1)):l(!0)},b=()=>{const z=M(i,C.Thousandth);let j="gradient-speed",B=z,w;switch(t){case"finished":w=e.jsx("span",{className:"pulse-3x",children:s.speed.info.finished});break;case"running":j="gradient-speed-running",w=e.jsx(e.Fragment,{children:s.speed.info.running});break;case"ready":default:w=e.jsx("span",{className:"pulse-3x",children:s.speed.info.ready})}return{gradientClass:j,fitText:B,footerText:w}},{gradientClass:E,fitText:A,footerText:G}=b(),F=(d==null?void 0:d.timeMs)!=null?M(d.timeMs,C.Thousandth):"-.---",D=(x==null?void 0:x.timeMs)!=null?M(x.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${E}`,onClick:T,role:"button",tabIndex:0,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",F," | ",D," ðŸ…",e.jsx("br",{}),g?s.play.new_record:_?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),s.speed.description]})}),e.jsx("div",{className:"fixed-footer",children:G})]})},ne=({reload:r})=>{const{currentTranslation:s}=k(),[t,n]=a.useState("ready"),[i,c]=a.useState(0),[u,o]=a.useState(!1),[f,l]=a.useState(!1),m=R(),{record:d,saveRecord:h,isNewRecord:g,setIsNewRecord:v}=$(I.timing.id),{roundsBest:x,saveRoundsBest:p,resetRoundsBest:S,isCurrentRoundBest:_}=q(I.timing.id);a.useEffect(()=>{o(!1),l(!0),setTimeout(()=>{c(0),n("ready"),l(!1),S(),v(!1)},0)},[r]),H({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:c,onEnd:()=>{n("finished"),o(!1),l(!1)},onStageChange:n});const T=()=>{m("button_click"),t==="ready"?(n("running"),o(!0)):t==="finished"?(c(0),n("ready"),o(!1)):l(!0)};a.useEffect(()=>{t==="finished"&&i>=5&&(p(i),h(i))},[t,i,p,h]);const b=()=>{const j=M(i,C.Thousandth);let B="gradient-timing",w=j,N="",y=null;return t==="finished"?(i<5?(w=s.timing.info.finishedFitText,N=e.jsx(e.Fragment,{children:s.timing.info.finishedDescription})):N=e.jsx(e.Fragment,{children:s.timing.description}),y=e.jsx("span",{className:"pulse-3x",children:s.timing.info.finishedFooter})):t==="running"?(B="gradient-timing-running",N=e.jsx(e.Fragment,{children:s.timing.description}),y=s.timing.info.running):(N=e.jsx(e.Fragment,{children:s.timing.description}),y=e.jsx("span",{className:"pulse-3x",children:s.timing.info.footer})),{gradientClass:B,fitText:w,description:N,footerText:y}},{gradientClass:E,fitText:A,description:G,footerText:F}=b(),D=(d==null?void 0:d.timeMs)!=null?M(d.timeMs,C.Thousandth):"-.---",z=(x==null?void 0:x.timeMs)!=null?M(x.timeMs,C.Thousandth):"-.---";return e.jsxs("div",{className:`game-tile ${E}`,onClick:T,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:A})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:["ðŸ† ",D," | ",z," ðŸ…",e.jsx("br",{}),g?s.play.new_record:_?s.play.new_best:null,e.jsx("br",{}),e.jsx("br",{}),G]})}),F&&e.jsx("div",{className:"fixed-footer",children:F})]})};function ie(r=5){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<r;n++)t+=s[Math.floor(Math.random()*s.length)];return t}function re(r){let s=2166136261;for(let t=0;t<r.length;t++)s^=r.charCodeAt(t),s=Math.imul(s,16777619);return s>>>0}function ae(r){return function(){let s=r+=1831565813;return s=Math.imul(s^s>>>15,s|1),s^=s+Math.imul(s^s>>>7,s|61),((s^s>>>14)>>>0)/4294967296}}function oe(r,s){const t=ae(re(s)),n=[...r];for(let i=n.length-1;i>0;i--){const c=Math.floor(t()*(i+1));[n[i],n[c]]=[n[c],n[i]]}return n}function ce(r,s,t){const[n,i]=a.useState(s||ie()),[c,u]=a.useState(t??0),o=a.useRef({seedInput:s,indexInput:t});a.useEffect(()=>{s&&s!==o.current.seedInput?(i(s),u(t??0)):t!==void 0&&t!==o.current.indexInput&&u(t),o.current={seedInput:s,indexInput:t}},[s,t]);const f=a.useMemo(()=>oe(r,n),[r,n]),l=f[(c%f.length+f.length)%f.length],m=a.useCallback(()=>u(h=>h+1),[]),d=a.useCallback(()=>u(h=>h-1),[]);return{item:l,seed:n,index:c,next:m,prev:d}}function P(r,s="never"){const[t,n]=K(),i=t.get("s")??void 0,c=Number.parseInt(t.get("i")??"0",10),{item:u,seed:o,index:f,next:l,prev:m}=ce(r,i,c);return a.useEffect(()=>{n({g:s,s:o,i:f.toString()},{replace:!0})},[o,f,n,s]),{item:u,index:f,next:l,prev:m}}const le=({game:r,reload:s})=>{const{currentTranslation:t}=k(),{item:n,index:i,next:c,prev:u}=P(t.never.data,r.id),o=R();a.useEffect(()=>{s&&i>0&&u()},[s]);const f=()=>{o("button_click"),c()},l=t.never.info.footer;return e.jsxs("div",{className:"game-tile gradient-never",onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:[t.general.round," ",i+1,e.jsx("br",{}),e.jsx("br",{}),t.never.description]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:l})})]})},de=100,ue=({game:r,reload:s})=>{const{currentTranslation:t}=k(),{item:n,index:i,next:c,prev:u}=P(t.truefalse.data,r.id),o=W(0),f=Y(o,[-50,50],[-3,3]),[l,m]=a.useState("neutral"),[d,h]=a.useState(!1),g=R();a.useEffect(()=>{s&&i>0&&(u(),h(!1),m("neutral"))},[s]);const v=(()=>{switch(l){case"correct":return"linear-gradient(45deg, rgba(0, 230, 118, 0.5), rgba(0, 161, 82, 0.5))";case"wrong":return"linear-gradient(135deg, rgba(255, 23, 68, 0.5), rgba(183, 28, 28, 0.5))";default:return"linear-gradient(180deg, #1e3c72, #2a5298)"}})(),x=T=>{d||(T<-100?p(!0):T>de?p(!1):o.set(0))},p=T=>{T===n.answer?(g("button_click"),m("correct")):(g("button_boom"),m("wrong")),h(!0)},S=()=>{d&&(c(),m("neutral"),h(!1))},_=d?e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer1}):e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer2});return e.jsxs(X.div,{className:"game-tile",drag:"x",dragListener:!d,dragConstraints:{left:0,right:0},style:{x:o,rotate:f,background:v,touchAction:"pan-y"},onDragEnd:(T,b)=>x(b.offset.x),onPointerUp:S,whileTap:{scale:.99},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:d?l==="correct"?"âœ… âœ… âœ…":"âŒ âŒ âŒ":n.question})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:[t.general.round," ",i+1,e.jsx("br",{}),e.jsx("br",{}),d?n.correct_answer:t.truefalse.description]})}),e.jsx("div",{className:"fixed-footer",children:_})]})},fe=({game:r,reload:s})=>{const{currentTranslation:t}=k(),{item:n,index:i,next:c,prev:u}=P(t.schaetzmal.data,r.id),[o,f]=a.useState(""),[l,m]=a.useState(!1),d=a.useRef(null),[h,g]=a.useState("neutral"),v=R();a.useEffect(()=>{s&&i>0&&(u(),f(""),m(!1),g("neutral"),d.current&&(d.current.value=""))},[s]),a.useEffect(()=>{l&&d.current&&(d.current.focus(),d.current.scrollIntoView({behavior:"smooth",block:"center"}))},[l]);const x=b=>{var E;if(!((E=d.current)!=null&&E.contains(b.target))){if(v("button_click"),o!==""&&!l)if(h==="answered"){f(""),g("neutral"),c();return}else{g("answered"),m(!1);return}m(!l)}},p=()=>l?e.jsx("textarea",{ref:d,value:o,onChange:b=>f(b.target.value),className:"input-like-bottom",placeholder:"SchÃ¤tzung eingeben.","aria-label":"SchÃ¤tz-Eingabe",rows:3,tabIndex:0}):e.jsx(e.Fragment,{children:o===""?t.schaetzmal.description:t.schaetzmal.info.answer+o}),_=h==="answered"?t.schaetzmal.info.footer1:o!==""&&l?t.schaetzmal.info.footer2:o!==""&&!l?t.schaetzmal.info.footer3:h==="neutral"&&l?t.schaetzmal.info.footer4:t.schaetzmal.info.footer5,T=p();return e.jsxs("div",{className:"game-tile gradient-schaetzmal",onClick:x,role:"button",tabIndex:0,onKeyDown:b=>{b.key===" "&&!l&&(b.preventDefault(),m(!0))},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:h==="neutral"?n.question:n.answer})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:[t.general.round," ",i+1,e.jsx("br",{}),e.jsx("br",{}),T]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:_})})]})},me=({game:r,reload:s})=>{const{currentTranslation:t}=k(),{item:n,index:i,next:c,prev:u}=P(t.sagwas.data,r.id),o=R();a.useEffect(()=>{s&&i>0&&u()},[s]);const f=()=>{o("button_click"),c()},l="gradient-sagmal",m=t.sagwas.info.footer;return e.jsxs("div",{className:`game-tile ${l}`,onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:[t.general.round," ",i+1,e.jsx("br",{}),e.jsx("br",{}),t.sagwas.description]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:m})})]})},he=({setReload:r})=>{const s=Q(),{currentTranslation:t}=k(),[n,i]=a.useState(!1),c=R(),u=()=>{if(c("button_click"),!n){i(!0);return}localStorage.setItem("tut-consent-given","true"),r()};return e.jsxs("div",{className:"game-tile gradient-disabled",onClick:u,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline text-center text-lg font-bold",children:t.consent.top})}),e.jsx("div",{className:"tile-bottom text-xs text-center px-2",children:n?e.jsx("p",{children:t.consent.bottom2}):e.jsxs("p",{children:[t.consent.bottom1,e.jsx("a",{href:"/#/settings/terms",onClick:()=>J(s.pathname+s.search),children:t.settings.items.terms})," & ",e.jsx("a",{href:"/#/settings/privacy",onClick:()=>J(s.pathname+s.search),children:t.settings.items.privacy})]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:n?t.consent.footer1:t.consent.footer2})})]})},xe=({game:r,reload:s})=>{const{currentTranslation:t}=k(),n=Array.from({length:4}).flatMap(()=>t.kingscup.data),{item:i,index:c,next:u,prev:o}=P(n,r.id),f=R();a.useEffect(()=>{s&&c>0&&o()},[s]);const l=()=>{f("button_click"),u()},m=t.kingscup.info.tap;return e.jsxs("div",{className:"game-tile gradient-never",onClick:l,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:i.card})}),e.jsx("div",{className:"tile-bottom",children:e.jsxs("p",{children:[t.general.round," ",c+1,e.jsx("br",{}),e.jsx("br",{}),i.info]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:m})})]})},ge={bombe:{Component:ee},reflex:{Component:te},speed:{Component:se},timing:{Component:ne},never:{Component:le},truefalse:{Component:ue},sagwas:{Component:me},schaetzmal:{Component:fe},kingscup:{Component:xe}},Te=({game:r,reload:s})=>{const[t,n]=a.useState(()=>localStorage.getItem("tut-consent-given")!=="true");if(t)return e.jsx(he,{setReload:()=>n(!1)});const i=ge[r.id]??{Component:()=>e.jsx("div",{children:"coming soon"})};return e.jsx(i.Component,{game:r,reload:s})},Se=({url:r,game:s})=>{const{currentTranslation:t}=k(),[n,i]=a.useState(!1),c=s?`gradient-${s.id}`:"gradient-default",u=R(),o=()=>{u("button_click"),navigator.clipboard.writeText(r).then(()=>{i(!0),setTimeout(()=>i(!1),4e3)}).catch(()=>{alert(t.share.alert)})},f=()=>n?t.share.copied:t.share.tapToCopy;return e.jsxs("div",{className:`game-tile ${c}`,onClick:o,children:[e.jsx("div",{className:"tile-top",children:e.jsx(Z,{value:r,className:"qr-code",bgColor:"transparent",fgColor:"white"})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{className:"fit-text-multiline",children:t.share.text})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:n?"":"pulse-3x",children:f()})})]})};export{Te as G,Se as S,Ne as g,J as s,R as u};
