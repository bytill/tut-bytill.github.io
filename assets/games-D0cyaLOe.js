import{r as a,j as e,u as z,a as _}from"./react-CP2Sic11.js";import{u as C}from"./i18n-utility-CbscySan.js";import{u as G,a as P,m as D}from"./framer-motion-B82yAxFI.js";import{Q as V}from"./qrcode-react-BP-xH_TE.js";const A="savedPath";function E(i){sessionStorage.setItem(A,i)}function ae(){return sessionStorage.getItem(A)||"/"}function k(){return a.useCallback(s=>{var n,c,o;const t={type:s};(c=(n=window.webkit)==null?void 0:n.messageHandlers)!=null&&c.iosListener?window.webkit.messageHandlers.iosListener.postMessage(t):(o=window.AndroidInterface)!=null&&o.postMessage&&window.AndroidInterface.postMessage(JSON.stringify(t))},[])}function I({start:i,direction:s,intervalMs:t=100,isRunning:n,onTick:c,onEnd:o,onStageChange:u,resetTrigger:l,stopTrigger:f}){const r=a.useRef(null),d=a.useRef(null),m=a.useRef(0),h=a.useRef("ready"),g=p=>{h.current!==p&&(h.current=p,u==null||u(p))},b=p=>{d.current===null&&(d.current=p);const T=(p-d.current)/1e3;let v=s==="up"?i+T:Math.max(0,i-T);if(p-m.current>=t&&(c==null||c(v,h.current),m.current=p),s==="down"&&v<=0){g("finished"),o==null||o();return}r.current=requestAnimationFrame(b)};a.useEffect(()=>(n?(g("running"),d.current=null,m.current=0,r.current=requestAnimationFrame(b)):h.current!=="finished"&&(g("ready"),r.current&&cancelAnimationFrame(r.current)),()=>{r.current&&cancelAnimationFrame(r.current)}),[n,l,f]),a.useEffect(()=>{f&&h.current==="running"&&(g("finished"),r.current&&cancelAnimationFrame(r.current),d.current=null,m.current=0,o==null||o())},[f])}var w=(i=>(i.Sec="sec",i.Tenth="tenth",i.Hundredth="hundredth",i.Thousandth="thousandth",i))(w||{});function F(i,s){let t;switch(s){case"sec":t=0;break;case"tenth":t=1;break;case"hundredth":t=2;break;case"thousandth":t=3;break;default:t=0}return i.toFixed(t)}const y=30,H=({reload:i})=>{const{currentTranslation:s}=C(),[t,n]=a.useState("ready"),[c,o]=a.useState(y),[u,l]=a.useState(!1),f=k();a.useEffect(()=>{l(!1),n("ready"),o(y)},[i]),I({start:y,direction:"down",intervalMs:100,isRunning:u,onTick:o,onEnd:()=>{f("button_boom"),n("finished"),l(!1)},onStageChange:n});const r=()=>{f("button_click"),t==="ready"?(n("running"),l(!0)):t==="finished"&&(n("ready"),o(y),l(!1))},d={ready:"gradient-bombe",running:"gradient-bombe-running",finished:"gradient-implosion"}[t],m={ready:e.jsx(e.Fragment,{children:s.bombe.description}),running:e.jsxs(e.Fragment,{children:[s.bombe.description,e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),s.bombe.info.running]}),finished:e.jsx(e.Fragment,{children:s.bombe.info.finished})}[t],h=()=>{if(t==="finished")return"!BOOM!";const b=F(c,w.Tenth);return t==="running"&&c<27?"💣":b},g={ready:s.bombe.info.readyFooter,finished:s.bombe.info.finishedFooter,running:null}[t];return e.jsxs("div",{className:`game-tile ${d}`,onClick:r,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:h()})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:m})}),g&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:g})})]})},L=({reload:i})=>{const{currentTranslation:s}=C(),[t,n]=a.useState("ready"),[c,o]=a.useState(0),[u,l]=a.useState(!1),[f,r]=a.useState(!1),d=k();a.useEffect(()=>{l(!1),r(!0),setTimeout(()=>{o(0),n("ready"),r(!1)},0)},[i]),I({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:o,onEnd:()=>{n("finished"),l(!1),r(!1)},onStageChange:n});const m=()=>{d("button_click"),t==="ready"?(n("running"),l(!0)):t==="finished"?(o(0),n("ready"),l(!1)):r(!0)},h=()=>{const v=c-4,S=F(v,w.Thousandth);let j="gradient-reflex",x="🔴🔴🔴",N=s.reflex.description,R=null;return t==="finished"?(v<0?(x=s.reflex.info.finishedFitText,N=s.reflex.info.finishedDescription):(x=S,N=""),R=s.reflex.info.finishedFooter):t==="running"?(j="gradient-reflex-running",v<-3?x="🔴🔴🔴":v<-2?x="🟢🔴🔴":v<-1?x="🟢🟢🔴":v<0?x="🟢🟢🟢":x=S,N=e.jsxs(e.Fragment,{children:[s.reflex.description,e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),s.reflex.info.running]})):(R=s.reflex.info.footer,N=s.reflex.description),{gradientClass:j,fitText:x,description:N,footerText:R}},{gradientClass:g,fitText:b,description:p,footerText:T}=h();return e.jsxs("div",{className:`game-tile ${g}`,onClick:m,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:b})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:p})}),T&&e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:T})})]})},$=({reload:i})=>{const{currentTranslation:s}=C(),[t,n]=a.useState("ready"),[c,o]=a.useState(0),[u,l]=a.useState(!1),[f,r]=a.useState(!1),d=k();a.useEffect(()=>{l(!1),r(!0),setTimeout(()=>{o(0),n("ready"),r(!1)},0)},[i]),I({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:o,onEnd:()=>{n("finished"),l(!1),r(!1)},onStageChange:n});const m=()=>{d("button_click"),t==="ready"?(n("running"),l(!0)):t==="finished"?(o(0),n("ready"),l(!1)):r(!0)},h=()=>{const T=F(c,w.Thousandth);let v="gradient-speed",S=T,j;switch(t){case"finished":j=e.jsx("span",{className:"pulse-3x",children:s.speed.info.finished});break;case"running":v="gradient-speed-running",j=e.jsx(e.Fragment,{children:s.speed.info.running});break;case"ready":default:j=e.jsx("span",{className:"pulse-3x",children:s.speed.info.ready})}return{gradientClass:v,fitText:S,footerText:j}},{gradientClass:g,fitText:b,footerText:p}=h();return e.jsxs("div",{className:`game-tile ${g}`,onClick:m,role:"button",tabIndex:0,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:b})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:s.speed.description})}),e.jsx("div",{className:"fixed-footer",children:p})]})},O=({reload:i})=>{const{currentTranslation:s}=C(),[t,n]=a.useState("ready"),[c,o]=a.useState(0),[u,l]=a.useState(!1),[f,r]=a.useState(!1),d=k();a.useEffect(()=>{l(!1),r(!0),setTimeout(()=>{o(0),n("ready"),r(!1)},0)},[i]),I({start:0,direction:"up",intervalMs:1,isRunning:u,stopTrigger:f,onTick:o,onEnd:()=>{n("finished"),l(!1),r(!1)},onStageChange:n});const m=()=>{d("button_click"),t==="ready"?(n("running"),l(!0)):t==="finished"?(o(0),n("ready"),l(!1)):r(!0)},h=()=>{const v=F(c,w.Thousandth);let S="gradient-timing",j=v,x="",N=null;return t==="finished"?(c<5?(j=s.timing.info.finishedFitText,x=e.jsx(e.Fragment,{children:s.timing.info.finishedDescription})):x=e.jsx(e.Fragment,{}),N=e.jsx("span",{className:"pulse-3x",children:s.timing.info.finishedFooter})):t==="running"?(S="gradient-timing-running",x=e.jsx(e.Fragment,{children:s.timing.info.running})):(x=e.jsx(e.Fragment,{children:s.timing.description}),N=e.jsx("span",{className:"pulse-3x",children:s.timing.info.footer})),{gradientClass:S,fitText:j,description:x,footerText:N}},{gradientClass:g,fitText:b,description:p,footerText:T}=h();return e.jsxs("div",{className:`game-tile ${g}`,onClick:m,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-singleline",children:b})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:p})}),T&&e.jsx("div",{className:"fixed-footer",children:T})]})};function q(i=5){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let n=0;n<i;n++)t+=s[Math.floor(Math.random()*s.length)];return t}function U(i){let s=2166136261;for(let t=0;t<i.length;t++)s^=i.charCodeAt(t),s=Math.imul(s,16777619);return s>>>0}function B(i){return function(){let s=i+=1831565813;return s=Math.imul(s^s>>>15,s|1),s^=s+Math.imul(s^s>>>7,s|61),((s^s>>>14)>>>0)/4294967296}}function Q(i,s){const t=B(U(s)),n=[...i];for(let c=n.length-1;c>0;c--){const o=Math.floor(t()*(c+1));[n[c],n[o]]=[n[o],n[c]]}return n}function W(i,s,t=0){const[n]=a.useState(()=>s||q()),[c,o]=a.useState(t),u=a.useMemo(()=>Q(i,n),[i,n]),l=u[(c%u.length+u.length)%u.length],f=a.useCallback(()=>{o(d=>d+1)},[]),r=a.useCallback(()=>{o(d=>d-1)},[]);return{item:l,seed:n,index:c,next:f,prev:r}}function M(i,s="never"){const[t,n]=z(),c=_(),o=t.get("s")??void 0,u=Number.parseInt(t.get("i")??"0",10),{item:l,seed:f,index:r,next:d,prev:m}=W(i,o,u);return a.useEffect(()=>{const h=t.get("s"),g=t.get("i");(h!==f||g!==r.toString())&&n({g:s,s:f,i:r.toString()},{replace:!0})},[f,r,c.search,n,s]),{item:l,index:r,next:d,prev:m}}const J=({game:i,reload:s})=>{const{currentTranslation:t}=C(),{item:n,index:c,next:o,prev:u}=M(t.never.data,i.id),l=k();a.useEffect(()=>{s&&c>0&&u()},[s]);const f=()=>{l("button_click"),o()},r=t.never.info.footer;return e.jsxs("div",{className:"game-tile gradient-never",onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:t.never.description})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:r})})]})},K=100,Y=({game:i,reload:s})=>{const{currentTranslation:t}=C(),{item:n,index:c,next:o,prev:u}=M(t.truefalse.data,i.id),l=G(0),f=P(l,[-50,50],[-3,3]),[r,d]=a.useState("neutral"),[m,h]=a.useState(!1),g=k();a.useEffect(()=>{s&&c>0&&(u(),h(!1),d("neutral"))},[s]);const b=(()=>{switch(r){case"correct":return"linear-gradient(45deg, rgba(0, 230, 118, 0.5), rgba(0, 161, 82, 0.5))";case"wrong":return"linear-gradient(135deg, rgba(255, 23, 68, 0.5), rgba(183, 28, 28, 0.5))";default:return"linear-gradient(180deg, #1e3c72, #2a5298)"}})(),p=j=>{m||(j<-100?T(!0):j>K?T(!1):l.set(0))},T=j=>{j===n.answer?(g("button_click"),d("correct")):(g("button_boom"),d("wrong")),h(!0)},v=()=>{m&&(o(),d("neutral"),h(!1))},S=m?e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer1}):e.jsx("span",{className:"pulse-3x",children:t.truefalse.info.footer2});return e.jsxs(D.div,{className:"game-tile",drag:"x",dragListener:!m,dragConstraints:{left:0,right:0},style:{x:l,rotate:f,background:b,touchAction:"pan-y"},onDragEnd:(j,x)=>p(x.offset.x),onPointerUp:v,whileTap:{scale:.99},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:m?r==="correct"?"✅ ✅ ✅":"❌ ❌ ❌":n.question})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:m?n.correct_answer:t.truefalse.description})}),e.jsx("div",{className:"fixed-footer",children:S})]})},X=({game:i,reload:s})=>{const{currentTranslation:t}=C(),{item:n,index:c,next:o,prev:u}=M(t.schaetzmal.data,i.id),[l,f]=a.useState(""),[r,d]=a.useState(!1),m=a.useRef(null),[h,g]=a.useState("neutral"),b=k();a.useEffect(()=>{s&&c>0&&(u(),f(""),d(!1),g("neutral"),m.current&&(m.current.value=""))},[s]),a.useEffect(()=>{r&&m.current&&(m.current.focus(),m.current.scrollIntoView({behavior:"smooth",block:"center"}))},[r]);const p=x=>{var N;if(!((N=m.current)!=null&&N.contains(x.target))){if(b("button_click"),l!==""&&!r)if(h==="answered"){f(""),g("neutral"),o();return}else{g("answered"),d(!1);return}d(!r)}},T=()=>r?e.jsx("textarea",{ref:m,value:l,onChange:x=>f(x.target.value),className:"input-like-bottom",placeholder:"Schätzung eingeben.","aria-label":"Schätz-Eingabe",rows:3,tabIndex:0}):e.jsx("p",{children:l===""?t.schaetzmal.description:t.schaetzmal.info.answer+l}),S=h==="answered"?t.schaetzmal.info.footer1:l!==""&&r?t.schaetzmal.info.footer2:l!==""&&!r?t.schaetzmal.info.footer3:h==="neutral"&&r?t.schaetzmal.info.footer4:t.schaetzmal.info.footer5,j=T();return e.jsxs("div",{className:"game-tile gradient-schaetzmal",onClick:p,role:"button",tabIndex:0,onKeyDown:x=>{x.key===" "&&!r&&(x.preventDefault(),d(!0))},children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:h==="neutral"?n.question:n.answer})}),e.jsx("div",{className:"tile-bottom",children:j}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:S})})]})},Z=({game:i,reload:s})=>{const{currentTranslation:t}=C(),{item:n,index:c,next:o,prev:u}=M(t.sagwas.data,i.id),l=k();a.useEffect(()=>{s&&c>0&&u()},[s]);const f=()=>{l("button_click"),o()},r="gradient-sagmal",d=t.sagwas.info.footer;return e.jsxs("div",{className:`game-tile ${r}`,onClick:f,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline",children:n})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{children:t.sagwas.description})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:d})})]})},ee=({setReload:i})=>{const s=_(),{currentTranslation:t}=C(),[n,c]=a.useState(!1),o=k(),u=()=>{if(o("button_click"),!n){c(!0);return}localStorage.setItem("tut-consent-given","true"),i()};return e.jsxs("div",{className:"game-tile gradient-disabled",onClick:u,children:[e.jsx("div",{className:"tile-top",children:e.jsx("div",{className:"fit-text-multiline text-center text-lg font-bold",children:t.consent.top})}),e.jsx("div",{className:"tile-bottom text-xs text-center px-2",children:n?e.jsx("p",{children:t.consent.bottom2}):e.jsxs("p",{children:[t.consent.bottom1,e.jsx("a",{href:"/#/settings/terms",onClick:()=>E(s.pathname+s.search),children:t.settings.items.terms})," & ",e.jsx("a",{href:"/#/settings/privacy",onClick:()=>E(s.pathname+s.search),children:t.settings.items.privacy})]})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:"pulse-3x",children:n?t.consent.footer1:t.consent.footer2})})]})},te={bombe:{Component:H},reflex:{Component:L},speed:{Component:$},timing:{Component:O},never:{Component:J},truefalse:{Component:Y},sagwas:{Component:Z},schaetzmal:{Component:X}},oe=({game:i,reload:s})=>{const[t,n]=a.useState(()=>localStorage.getItem("tut-consent-given")!=="true");if(t)return e.jsx(ee,{setReload:()=>n(!1)});const c=te[i.id]??{Component:()=>e.jsx("div",{children:"coming soon"})};return e.jsx(c.Component,{game:i,reload:s})},ce=({url:i,game:s})=>{const{currentTranslation:t}=C(),[n,c]=a.useState(!1),o=s?`gradient-${s.id}`:"gradient-default",u=k(),l=()=>{u("button_click"),navigator.clipboard.writeText(i).then(()=>{c(!0),setTimeout(()=>c(!1),4e3)}).catch(()=>{alert(t.share.alert)})},f=()=>n?t.share.copied:t.share.tapToCopy;return e.jsxs("div",{className:`game-tile ${o}`,onClick:l,children:[e.jsx("div",{className:"tile-top",children:e.jsx(V,{value:i,className:"qr-code",bgColor:"transparent",fgColor:"white"})}),e.jsx("div",{className:"tile-bottom",children:e.jsx("p",{className:"fit-text-multiline",children:t.share.text})}),e.jsx("div",{className:"fixed-footer",children:e.jsx("span",{className:n?"":"pulse-3x",children:f()})})]})};export{oe as G,ce as S,ae as g,E as s,k as u};
