import{a as O,r as h,j as e,c as G,R,u as Q,d as W,e as I,H as X}from"./react-CP2Sic11.js";import{r as D,R as Z}from"./react-dom-D2lupPsf.js";import{u as w,g as k,s as P,L as ee}from"./i18n-utility-CbscySan.js";import{u as C,s as H,S as te,G as ne,g as se}from"./games-D0cyaLOe.js";import"./vendor-D5KewTc8.js";import"./i18n-de-never-DEVRdBKE.js";import"./i18n-de-settings_data-BEYItzou.js";import"./i18n-de-truefalse-Kz11CAeB.js";import"./i18n-de-sagWas-DF1h4mkh.js";import"./i18n-de-schaetzMal-Ca8elwcg.js";import"./i18n-en-never-CSSF9yzg.js";import"./i18n-en-settings_data-D0XS-jbR.js";import"./i18n-en-truefalse-D5Kl3_os.js";import"./i18n-en-sagWas-DNxgOlrY.js";import"./i18n-en-schaetzMal-DUogxvyt.js";import"./framer-motion-B82yAxFI.js";import"./qrcode-react-BP-xH_TE.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}})();function oe(){const t=O();h.useEffect(()=>{var s,a;typeof window<"u"&&typeof window.gtag=="function"&&((a=(s=window.Cookiebot)==null?void 0:s.consent)==null?void 0:a.statistics)===!0&&window.gtag("event","page_view",{page_path:t.pathname+t.search+t.hash})},[t])}function K(t,s={}){var a,n;typeof window<"u"&&typeof window.gtag=="function"&&((n=(a=window.Cookiebot)==null?void 0:a.consent)==null?void 0:n.statistics)===!0&&window.gtag("event",t,s)}function T(t,s){K("game_start",{game:t,orgin:s})}function ie(t,s){K("game_end",{game:t,duration:s})}function y(t){K("button_click",{buttonName:t})}function ae(t="",s=50){const[a,n]=h.useState(0);return h.useEffect(()=>{if(n(0),!t)return;const o=setInterval(()=>{n(i=>{const r=i+1;return r>t.length&&clearInterval(o),r})},s);return()=>clearInterval(o)},[t,s]),t.slice(0,a)}function re({text:t}){const s=ae(t,50);return e.jsx("div",{className:"speech-bubble fade-in",children:e.jsx("div",{className:"speech-bubble-text",children:s})})}function U({page:t,steps:s,visible:a,currentStep:n}){const{currentTranslation:o}=w(),[i,r]=h.useState(0),g=C();if(h.useEffect(()=>{a&&n(i)},[i,a]),!a)return null;const v=()=>{g("button_click"),y(`onboarding_${t}skiped`),localStorage.setItem(`onboarding-${t}-completed`,"true"),n(0)},x=()=>{i>0&&(g("button_click"),r(m=>m-1))},j=()=>{i<s.length-1?(g("button_click"),r(m=>m+1)):(g("button_click"),y(`onboarding_${t}_completed`),localStorage.setItem(`onboarding-${t}-completed`,"true"),n(0))},p=s[i];function d(m,f){return Array.from({length:f},(c,b)=>b===f-1?"🚀":b<m?"🟢":"⚪️").join(" ")}return D.createPortal(e.jsxs("div",{className:"onboarding-container",children:[e.jsxs("header",{className:"onboarding-header",children:[e.jsxs("h1",{className:"onboarding-title",children:[i+1,"/",s.length," ",p.title]}),e.jsx("span",{className:"onboarding-skip",onClick:v,children:o.onboarding.skip})]}),e.jsx("img",{className:"onboarding_avatar",src:"/img/tut-icon_512.png",alt:"Tills Ultimatives Trinkspiel"}),e.jsx("main",{className:"onboarding-main",children:e.jsx("div",{children:p.info})}),e.jsxs("footer",{className:"onboarding-navigation",children:[e.jsx("span",{className:`onboarding-back ${i===0?"disabled":""}`,onClick:i===0?void 0:x,children:o.onboarding.back}),e.jsx("span",{className:"onboarding-progress",children:d(i,s.length)}),e.jsx("span",{className:"onboarding-forward",onClick:j,children:i<s.length-1?o.onboarding.next:o.onboarding.done})]})]}),document.body)}function ce({items:t,intervalMs:s,fadeDurationMs:a}){const[n,o]=h.useState(t.length-1),[i,r]=h.useState(!1);return h.useEffect(()=>{if(t.length===0)return;const g=setInterval(()=>{r(!0),setTimeout(()=>{o(v=>(v-1+t.length)%t.length),r(!1)},a)},s);return()=>clearInterval(g)},[t,s,a]),{currentItem:t[n],isFading:i}}const Y="gameCounts";function J(){const t=localStorage.getItem(Y);try{return t?JSON.parse(t):{}}catch{return{}}}function le(t){const s=J();s[t]=(s[t]||0)+1,localStorage.setItem(Y,JSON.stringify(s))}const $=["favs","community","new","fy","shuffle"],F="sortOption";function de(t){const s=[...t];for(let a=s.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[s[a],s[n]]=[s[n],s[a]]}return s}const L={favs:.33,community:.33,new:.33};function E(){const[t,s]=h.useState(()=>localStorage.getItem(F)||$[3]);return h.useEffect(()=>{localStorage.setItem(F,t)},[t]),{sortOption:t,setSortOption:s}}function me(){const{sortOption:t}=E();return{favs:"⭐️",community:"🔥",new:"🆕",fy:"🎯",shuffle:"🔀"}[t]??""}function ue(){const{sortOption:t}=E();return h.useMemo(()=>{const a=J(),n=Object.values(k).map(o=>({...o,count:a[o.id]||0}));if(t==="shuffle")return de(n);if(t==="community")return[...n].sort((o,i)=>(o.coummunityRank??999)-(i.coummunityRank??999));if(t==="new")return[...n].sort((o,i)=>(i.releaseOrder??0)-(o.releaseOrder??0));if(t==="favs")return[...n].sort((o,i)=>i.count-o.count);if(t==="fy"){let o=function(d){const m={};return d.forEach((f,c)=>m[f.id]=c),m};const i=[...n].sort((d,m)=>m.count-d.count),r=[...n].sort((d,m)=>(d.coummunityRank??999)-(m.coummunityRank??999)),g=[...n].sort((d,m)=>(m.releaseOrder??0)-(d.releaseOrder??0)),v=o(i),x=o(r),j=o(g),p=n.map(d=>{const m=v[d.id]*L.favs+x[d.id]*L.community+j[d.id]*L.new;return{game:d,score:m}});return p.sort((d,m)=>d.score!==m.score?d.score-m.score:(x[d.game.id]??999)-(x[m.game.id]??999)),p.map(d=>d.game)}else return[...n].sort((o,i)=>o.nameKey.localeCompare(i.nameKey))},[t])}function ge(){const{t,currentTranslation:s}=w(),a=G(),n=R.useRef(""),o=O(),[i,r]=h.useState(0),{currentItem:g,isFading:v}=ce({items:Object.values(k),intervalMs:12e3,fadeDurationMs:600});function x(){let c;do{const b=Object.values(k);c=b[Math.floor(Math.random()*b.length)]}while(c.id===n.current);return n.current=c.id,c}R.useLayoutEffect(()=>{if(o.pathname==="/"){const c=document.getElementById("dynamicMiniGames"),b=sessionStorage.getItem("miniGamesScrollLeft");c&&b!==null&&(c.scrollLeft=parseInt(b,10),sessionStorage.removeItem("miniGamesScrollLeft"))}},[o]);const j=localStorage.getItem("onboarding-home-completed")==="true",[p,d]=h.useState(!1),m=ue(),f=C();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`main-container ${p?`onboarding-active onboarding-step-${i+1}`:""}`,children:[e.jsxs("div",{className:`kachel erste-kachel vorschlag-container ${v?"fading":""}`,onClick:()=>{f("button_click"),a(`/play?g=${g.id}`),T(g.id,"suggestion")},children:[e.jsx("img",{className:"vorschlag-img",src:g.img_src,alt:`Vorschlag: ${t(g.nameKey)}`}),e.jsx("div",{className:"vorschlag-text",children:t(g.nameKey)}),e.jsx("div",{className:"vorschlag-description",children:t(g.descriptionKey)})]}),e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"titel-text",children:s.general.title}),e.jsx("div",{className:"button icon icon-menu",onClick:()=>{f("button_click"),H("/"),a("/settings")}})]}),e.jsx("div",{className:"kachel zweite-kachel",onClick:()=>{if(f("button_click"),j){const c=x();a(`/play?g=${c.id}`),T(c.id,"random_game")}else d(!0),y("onboarding_home_started")},children:e.jsx("img",{src:"/img/tut-icon_splsh.webp",alt:"Tills Ultimatives Trinkspiel"})}),e.jsxs("div",{className:"minigames-title-container",children:[e.jsx("div",{className:"minispiele-titel",children:s.general.minigames}),e.jsx("div",{className:"icon-sort",onClick:()=>{f("button_click"),a("/settings/sort")},children:e.jsx("div",{className:"sort-label",children:me()})})]}),e.jsx("div",{className:"kachel dritte-kachel",children:e.jsx("div",{className:"minispiele-scroll",id:"dynamicMiniGames",children:Object.values(m).map(c=>e.jsxs("div",{className:"minispiel-item",onClick:()=>{f("button_click"),a(`/play?g=${c.id}`),T(c.id,"minigame_scroll")},style:{cursor:"pointer"},children:[e.jsx("img",{src:c.img_src,alt:t(c.nameKey)}),e.jsx("div",{className:"minispiel-name",children:t(c.nameKey)})]},c.id))})}),!j&&!p&&e.jsx(re,{text:s.onboarding.hello})]}),e.jsx(U,{page:"home",steps:Object.values(s.onboarding.home),visible:p,currentStep:c=>{r(c),c===0&&localStorage.getItem("onboarding-home-completed")==="true"&&d(!1)}})]})}function he({visible:t,title:s,onClose:a,rulesText:n}){const o=C(),i=()=>{o("button_click"),a()};return D.createPortal(e.jsx("div",{className:`overlay-backdrop ${t?"fade-in":"fade-out"}`,children:e.jsxs("div",{className:"overlay-content",children:[e.jsx("div",{className:"overlay-title",children:s}),e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:n}}),e.jsx("div",{className:"overlay-footer",children:e.jsx("button",{className:"overlay-close-btn",onClick:i,children:"Schließen"})})]})}),document.body)}function fe(){const{t,currentTranslation:s}=w(),a=G(),n=O(),[o]=Q(),i=o.get("g")||"bombe",r=k[i],[g,v]=h.useState(0),[x,j]=h.useState(0),[p,d]=h.useState(!1),[m,f]=h.useState(!1),c=h.useRef(null),b=C();h.useEffect(()=>{c.current=Date.now()},[i]);function l(){if(c.current){const N=Math.round((Date.now()-c.current)/1e3);ie(i,N),le(i),c.current=null}}const u=()=>{b("button_click"),l(),a("/")},S=()=>{b("button_click"),j(N=>N+1),y("retry_button")},q=()=>{b("button_click"),d(N=>!N),y("share_button_opened")},[M,z]=h.useState(()=>{const N=localStorage.getItem("onboarding-home-completed")==="true",V=localStorage.getItem("onboarding-play-completed")==="true";return N&&!V});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`game-container ${M?`onboarding-active onboarding-step-${g+1}`:""}`,children:[e.jsxs("div",{className:"game-info",children:[e.jsx("div",{className:"button back-button icon icon-close",onClick:u}),e.jsx("img",{className:"game-img",src:r.img_src,alt:t(r.nameKey)}),e.jsx("div",{className:"button menu-play icon icon-menu",onClick:()=>{H(n.pathname+n.search),a("/settings")}})]}),e.jsxs("div",{className:"game-contolbar",children:[e.jsx("div",{className:`button icon ${p?"icon-arrow_up":"icon-ios_share"}`,id:"share-button",onClick:q}),e.jsxs("div",{className:"game-name-wrapper",onClick:()=>{f(!0),y("game_rules_opened")},children:[e.jsx("div",{className:"game-name",children:t(r.nameKey)}),e.jsx("div",{className:"italic",children:s.play.tapInfo})]}),e.jsx("div",{className:"button icon icon-refresh",id:"retry-button",onClick:S})]}),e.jsx("div",{className:"game-widget",children:p?e.jsx(te,{url:window.location.href,game:r}):e.jsx(ne,{game:r,reload:x})})]}),e.jsx(he,{visible:m,title:t(r.nameKey),rulesText:t(r.rulesKey),onClose:()=>f(!1)}),e.jsx(U,{page:"play",steps:Object.values(s.onboarding.play),visible:M,currentStep:N=>{v(N),N===0&&localStorage.getItem("onboarding-play-completed")==="true"&&z(!1)}})]})}const A={instagram:"https://www.instagram.com/tyllyboy/",tiktok:"https://www.tiktok.com/@tyllyboy",linkedin:"https://www.linkedin.com/in/tillmann-woerner-211876261"},_=({title:t,items:s,onItemClick:a,getLabel:n,selectedKey:o})=>{const{currentTranslation:i}=w();return e.jsxs("section",{className:"settings-section",children:[e.jsx("h2",{className:"section-title",children:t}),e.jsx("ul",{className:"settings-list",children:s.map(r=>e.jsxs("li",{className:"settings-list-item",onClick:()=>a(r),children:[e.jsx("span",{className:"settings-list-item-content",children:n(r)}),e.jsx("span",{className:"settings-list-item-right",children:o===r?e.jsx("span",{children:i.settings.selected}):r==="cookies"?e.jsx("span",{children:i.settings.change}):Object.values(i.settings.sections).includes(t)?e.jsx("span",{className:"settings-list-item-chevron"}):null})]},r))})]})};function B(){const t=G(),s=O(),a=decodeURIComponent(s.pathname.split("/settings/")[1]??""),{t:n,language:o,setLanguage:i,currentTranslation:r}=w(),{sortOption:g,setSortOption:v}=E(),x=r.settings.data,j=C(),p=l=>{var u;return(u=k[l])!=null&&u.nameKey?n(k[l].nameKey):n(`settings.items.${l}`)??l},d=()=>{j("button_click"),t(-1)},m=()=>{j("button_click"),t(se())},f=l=>{var u,S;j("button_click"),l==="cookies"?((S=(u=window==null?void 0:window.Cookiebot)==null?void 0:u.show)==null||S.call(u),y("settings_cookies_change")):l==="help"?(localStorage.setItem("onboarding-home-completed","false"),localStorage.setItem("onboarding-play-completed","false"),t("/")):A[l]?(window.open(A[l],"_blank"),y("settings_social_"+l)):P.includes(l)?(i(l),y("settings_language_change_"+l)):$.includes(l)?(v(l),y("settings_sort_change_"+l)):(t(`/settings/${l}`),y("settings__"+l))},c=()=>a==="language"?e.jsxs(e.Fragment,{children:[e.jsx(_,{title:n("settings.selected"),items:[o],onItemClick:()=>{},getLabel:u=>n(`languages.${u}`),selectedKey:""}),e.jsx(_,{title:n("settings.items.language"),items:P,onItemClick:f,getLabel:u=>n(`languages.${u}`),selectedKey:o})]}):a==="sort"?e.jsxs(e.Fragment,{children:[e.jsx(_,{title:n("settings.selected"),items:[g],onItemClick:()=>{},getLabel:u=>n(`settings.items.${u}`),selectedKey:""}),e.jsx(_,{title:n("settings.options"),items:$,onItemClick:f,getLabel:u=>n(`settings.items.${u}`),selectedKey:g})]}):x[a]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:x[a].text}}):k[a]?e.jsx("div",{className:"overlay-body",dangerouslySetInnerHTML:{__html:n(k[a].rulesKey)}}):a?e.jsx("p",{className:"overlay-body",children:n("settings.notFound")}):[{title:n("settings.sections.general"),items:["help","language","sort"]},{title:n("settings.sections.social"),items:["instagram","tiktok","linkedin"]},{title:n("settings.sections.rules"),items:Object.keys(k)},{title:n("settings.sections.legal"),items:["cookies","privacy","imprint","terms"]}].map(({title:u,items:S})=>e.jsx(_,{title:u,items:S,onItemClick:f,getLabel:p},u));function b(l){var u;return l?l==="language"?n("settings.items.language"):l==="sort"?n("settings.items.sort"):k[l]?n(`${l}.name`):(u=x[l])!=null&&u.id?n(`settings.items.${l}`):n("settings.notFound"):n("settings.title")}return e.jsxs("div",{className:"settings-container",children:[e.jsxs("header",{className:"settings-header",children:[a?e.jsx("span",{className:"header-back",onClick:d,children:n("settings.back")}):e.jsx("span",{className:"header-fertig",onClick:m,children:n("settings.done")}),e.jsx("h1",{className:"header-title",children:b(a)}),e.jsx("span",{className:"header-fertig invisible"})]}),e.jsx("main",{className:"settings-main",children:c()})]})}function pe(){return oe(),e.jsx(ee,{children:e.jsxs(W,{children:[e.jsx(I,{path:"/",element:e.jsx(ge,{})}),e.jsx(I,{path:"/play",element:e.jsx(fe,{})}),e.jsx(I,{path:"/settings",element:e.jsx(B,{})}),e.jsx(I,{path:"/settings/:page",element:e.jsx(B,{})})]})})}Z.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(X,{children:e.jsx(pe,{})})}));
